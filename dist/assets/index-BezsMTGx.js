var Kn=Object.defineProperty;var Gn=(n,e,t)=>e in n?Kn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var y=(n,e,t)=>Gn(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=t(i);fetch(i.href,r)}})();class V{static render(e){return this.element.classList.add("loading-spinner"),this.element.style.height=`${e}px`||"10px",this.element.style.width=`${e}px`||"10px",this.element}}y(V,"element",document.createElement("div"));var Jn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sn(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var rn={exports:{}};(function(n){(function(e){n.exports?n.exports=e():window.intlTelInput=e()})(()=>{var e=(()=>{var t=Object.defineProperty,s=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,a=(c,l)=>{for(var m in l)t(c,m,{get:l[m],enumerable:!0})},o=(c,l,m,g)=>{if(l&&typeof l=="object"||typeof l=="function")for(let E of i(l))!r.call(c,E)&&E!==m&&t(c,E,{get:()=>l[E],enumerable:!(g=s(l,E))||g.enumerable});return c},u=c=>o(t({},"__esModule",{value:!0}),c),h={};a(h,{Iti:()=>ae,default:()=>pe});var d=[["af","93"],["al","355"],["dz","213"],["as","1",5,["684"]],["ad","376"],["ao","244"],["ai","1",6,["264"]],["ag","1",7,["268"]],["ar","54"],["am","374"],["aw","297"],["ac","247"],["au","61",0],["at","43"],["az","994"],["bs","1",8,["242"]],["bh","973"],["bd","880"],["bb","1",9,["246"]],["by","375"],["be","32"],["bz","501"],["bj","229"],["bm","1",10,["441"]],["bt","975"],["bo","591"],["ba","387"],["bw","267"],["br","55"],["io","246"],["vg","1",11,["284"]],["bn","673"],["bg","359"],["bf","226"],["bi","257"],["kh","855"],["cm","237"],["ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","879","902","905"]],["cv","238"],["bq","599",1,["3","4","7"]],["ky","1",12,["345"]],["cf","236"],["td","235"],["cl","56"],["cn","86"],["cx","61",2,["89164"]],["cc","61",1,["89162"]],["co","57"],["km","269"],["cg","242"],["cd","243"],["ck","682"],["cr","506"],["ci","225"],["hr","385"],["cu","53"],["cw","599",0],["cy","357"],["cz","420"],["dk","45"],["dj","253"],["dm","1",13,["767"]],["do","1",2,["809","829","849"]],["ec","593"],["eg","20"],["sv","503"],["gq","240"],["er","291"],["ee","372"],["sz","268"],["et","251"],["fk","500"],["fo","298"],["fj","679"],["fi","358",0],["fr","33"],["gf","594"],["pf","689"],["ga","241"],["gm","220"],["ge","995"],["de","49"],["gh","233"],["gi","350"],["gr","30"],["gl","299"],["gd","1",14,["473"]],["gp","590",0],["gu","1",15,["671"]],["gt","502"],["gg","44",1,["1481","7781","7839","7911"]],["gn","224"],["gw","245"],["gy","592"],["ht","509"],["hn","504"],["hk","852"],["hu","36"],["is","354"],["in","91"],["id","62"],["ir","98"],["iq","964"],["ie","353"],["im","44",2,["1624","74576","7524","7924","7624"]],["il","972"],["it","39",0],["jm","1",4,["876","658"]],["jp","81"],["je","44",3,["1534","7509","7700","7797","7829","7937"]],["jo","962"],["kz","7",1,["33","7"]],["ke","254"],["ki","686"],["xk","383"],["kw","965"],["kg","996"],["la","856"],["lv","371"],["lb","961"],["ls","266"],["lr","231"],["ly","218"],["li","423"],["lt","370"],["lu","352"],["mo","853"],["mg","261"],["mw","265"],["my","60"],["mv","960"],["ml","223"],["mt","356"],["mh","692"],["mq","596"],["mr","222"],["mu","230"],["yt","262",1,["269","639"]],["mx","52"],["fm","691"],["md","373"],["mc","377"],["mn","976"],["me","382"],["ms","1",16,["664"]],["ma","212",0],["mz","258"],["mm","95"],["na","264"],["nr","674"],["np","977"],["nl","31"],["nc","687"],["nz","64"],["ni","505"],["ne","227"],["ng","234"],["nu","683"],["nf","672"],["kp","850"],["mk","389"],["mp","1",17,["670"]],["no","47",0],["om","968"],["pk","92"],["pw","680"],["ps","970"],["pa","507"],["pg","675"],["py","595"],["pe","51"],["ph","63"],["pl","48"],["pt","351"],["pr","1",3,["787","939"]],["qa","974"],["re","262",0],["ro","40"],["ru","7",0],["rw","250"],["ws","685"],["sm","378"],["st","239"],["sa","966"],["sn","221"],["rs","381"],["sc","248"],["sl","232"],["sg","65"],["sx","1",21,["721"]],["sk","421"],["si","386"],["sb","677"],["so","252"],["za","27"],["kr","82"],["ss","211"],["es","34"],["lk","94"],["bl","590",1],["sh","290"],["kn","1",18,["869"]],["lc","1",19,["758"]],["mf","590",2],["pm","508"],["vc","1",20,["784"]],["sd","249"],["sr","597"],["sj","47",1,["79"]],["se","46"],["ch","41"],["sy","963"],["tw","886"],["tj","992"],["tz","255"],["th","66"],["tl","670"],["tg","228"],["tk","690"],["to","676"],["tt","1",22,["868"]],["tn","216"],["tr","90"],["tm","993"],["tc","1",23,["649"]],["tv","688"],["ug","256"],["ua","380"],["ae","971"],["gb","44",0],["us","1",0],["uy","598"],["vi","1",24,["340"]],["uz","998"],["vu","678"],["va","39",1,["06698"]],["ve","58"],["vn","84"],["wf","681"],["eh","212",1,["5288","5289"]],["ye","967"],["zm","260"],["zw","263"],["ax","358",1,["18"]]],f=[];for(let c=0;c<d.length;c++){const l=d[c];f[c]={name:"",iso2:l[0],dialCode:l[1],priority:l[2]||0,areaCodes:l[3]||null,nodeById:{}}}var C=f,v={ad:"Andorra",ae:"United Arab Emirates",af:"Afghanistan",ag:"Antigua & Barbuda",ai:"Anguilla",al:"Albania",am:"Armenia",ao:"Angola",aq:"Antarctica",ar:"Argentina",as:"American Samoa",at:"Austria",au:"Australia",aw:"Aruba",ax:"Åland Islands",az:"Azerbaijan",ba:"Bosnia & Herzegovina",bb:"Barbados",bd:"Bangladesh",be:"Belgium",bf:"Burkina Faso",bg:"Bulgaria",bh:"Bahrain",bi:"Burundi",bj:"Benin",bl:"St. Barthélemy",bm:"Bermuda",bn:"Brunei",bo:"Bolivia",bq:"Caribbean Netherlands",br:"Brazil",bs:"Bahamas",bt:"Bhutan",bv:"Bouvet Island",bw:"Botswana",by:"Belarus",bz:"Belize",ca:"Canada",cc:"Cocos (Keeling) Islands",cd:"Congo - Kinshasa",cf:"Central African Republic",cg:"Congo - Brazzaville",ch:"Switzerland",ci:"Côte d’Ivoire",ck:"Cook Islands",cl:"Chile",cm:"Cameroon",cn:"China",co:"Colombia",cr:"Costa Rica",cu:"Cuba",cv:"Cape Verde",cw:"Curaçao",cx:"Christmas Island",cy:"Cyprus",cz:"Czechia",de:"Germany",dj:"Djibouti",dk:"Denmark",dm:"Dominica",do:"Dominican Republic",dz:"Algeria",ec:"Ecuador",ee:"Estonia",eg:"Egypt",eh:"Western Sahara",er:"Eritrea",es:"Spain",et:"Ethiopia",fi:"Finland",fj:"Fiji",fk:"Falkland Islands",fm:"Micronesia",fo:"Faroe Islands",fr:"France",ga:"Gabon",gb:"United Kingdom",gd:"Grenada",ge:"Georgia",gf:"French Guiana",gg:"Guernsey",gh:"Ghana",gi:"Gibraltar",gl:"Greenland",gm:"Gambia",gn:"Guinea",gp:"Guadeloupe",gq:"Equatorial Guinea",gr:"Greece",gs:"South Georgia & South Sandwich Islands",gt:"Guatemala",gu:"Guam",gw:"Guinea-Bissau",gy:"Guyana",hk:"Hong Kong SAR China",hm:"Heard & McDonald Islands",hn:"Honduras",hr:"Croatia",ht:"Haiti",hu:"Hungary",id:"Indonesia",ie:"Ireland",il:"Israel",im:"Isle of Man",in:"India",io:"British Indian Ocean Territory",iq:"Iraq",ir:"Iran",is:"Iceland",it:"Italy",je:"Jersey",jm:"Jamaica",jo:"Jordan",jp:"Japan",ke:"Kenya",kg:"Kyrgyzstan",kh:"Cambodia",ki:"Kiribati",km:"Comoros",kn:"St. Kitts & Nevis",kp:"North Korea",kr:"South Korea",kw:"Kuwait",ky:"Cayman Islands",kz:"Kazakhstan",la:"Laos",lb:"Lebanon",lc:"St. Lucia",li:"Liechtenstein",lk:"Sri Lanka",lr:"Liberia",ls:"Lesotho",lt:"Lithuania",lu:"Luxembourg",lv:"Latvia",ly:"Libya",ma:"Morocco",mc:"Monaco",md:"Moldova",me:"Montenegro",mf:"St. Martin",mg:"Madagascar",mh:"Marshall Islands",mk:"North Macedonia",ml:"Mali",mm:"Myanmar (Burma)",mn:"Mongolia",mo:"Macao SAR China",mp:"Northern Mariana Islands",mq:"Martinique",mr:"Mauritania",ms:"Montserrat",mt:"Malta",mu:"Mauritius",mv:"Maldives",mw:"Malawi",mx:"Mexico",my:"Malaysia",mz:"Mozambique",na:"Namibia",nc:"New Caledonia",ne:"Niger",nf:"Norfolk Island",ng:"Nigeria",ni:"Nicaragua",nl:"Netherlands",no:"Norway",np:"Nepal",nr:"Nauru",nu:"Niue",nz:"New Zealand",om:"Oman",pa:"Panama",pe:"Peru",pf:"French Polynesia",pg:"Papua New Guinea",ph:"Philippines",pk:"Pakistan",pl:"Poland",pm:"St. Pierre & Miquelon",pn:"Pitcairn Islands",pr:"Puerto Rico",ps:"Palestinian Territories",pt:"Portugal",pw:"Palau",py:"Paraguay",qa:"Qatar",re:"Réunion",ro:"Romania",rs:"Serbia",ru:"Russia",rw:"Rwanda",sa:"Saudi Arabia",sb:"Solomon Islands",sc:"Seychelles",sd:"Sudan",se:"Sweden",sg:"Singapore",sh:"St. Helena",si:"Slovenia",sj:"Svalbard & Jan Mayen",sk:"Slovakia",sl:"Sierra Leone",sm:"San Marino",sn:"Senegal",so:"Somalia",sr:"Suriname",ss:"South Sudan",st:"São Tomé & Príncipe",sv:"El Salvador",sx:"Sint Maarten",sy:"Syria",sz:"Eswatini",tc:"Turks & Caicos Islands",td:"Chad",tf:"French Southern Territories",tg:"Togo",th:"Thailand",tj:"Tajikistan",tk:"Tokelau",tl:"Timor-Leste",tm:"Turkmenistan",tn:"Tunisia",to:"Tonga",tr:"Turkey",tt:"Trinidad & Tobago",tv:"Tuvalu",tw:"Taiwan",tz:"Tanzania",ua:"Ukraine",ug:"Uganda",um:"U.S. Outlying Islands",us:"United States",uy:"Uruguay",uz:"Uzbekistan",va:"Vatican City",vc:"St. Vincent & Grenadines",ve:"Venezuela",vg:"British Virgin Islands",vi:"U.S. Virgin Islands",vn:"Vietnam",vu:"Vanuatu",wf:"Wallis & Futuna",ws:"Samoa",ye:"Yemen",yt:"Mayotte",za:"South Africa",zm:"Zambia",zw:"Zimbabwe"},b={selectedCountryAriaLabel:"Selected country",noCountrySelected:"No country selected",countryListAriaLabel:"List of countries",searchPlaceholder:"Search",zeroSearchResults:"No results found",oneSearchResult:"1 result found",multipleSearchResults:"${count} results found",ac:"Ascension Island",xk:"Kosovo"},T={...v,...b};for(let c=0;c<C.length;c++)C[c].name=T[C[c].iso2];var M=0,D={allowDropdown:!0,autoPlaceholder:"polite",containerClass:"",countryOrder:null,countrySearch:!0,customPlaceholder:null,dropdownContainer:null,excludeCountries:[],fixDropdownWidth:!0,formatAsYouType:!0,formatOnDisplay:!0,geoIpLookup:null,hiddenInput:null,i18n:{},initialCountry:"",nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",showFlags:!0,separateDialCode:!1,strictMode:!1,useFullscreenPopup:typeof navigator<"u"&&typeof window<"u"?/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=500:!1,utilsScript:"",validationNumberType:"MOBILE"},H=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],k=c=>c.replace(/\D/g,""),q=(c="")=>c.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),W=c=>{const l=k(c);if(l.charAt(0)==="1"){const m=l.substr(1,3);return H.indexOf(m)!==-1}return!1},P=(c,l,m,g)=>{if(m===0&&!g)return 0;let E=0;for(let L=0;L<l.length;L++){if(/[+0-9]/.test(l[L])&&E++,E===c&&!g)return L+1;if(g&&E===c+1)return L}return l.length},O=(c,l,m)=>{const g=document.createElement(c);return l&&Object.entries(l).forEach(([E,L])=>g.setAttribute(E,L)),m&&m.appendChild(g),g},B=c=>{const{instances:l}=_;Object.values(l).forEach(m=>m[c]())},ae=class{constructor(c,l={}){this.id=M++,this.telInput=c,this.highlightedItem=null,this.options=Object.assign({},D,l),this.hadInitialPlaceholder=!!c.getAttribute("placeholder")}_init(){this.options.useFullscreenPopup&&(this.options.fixDropdownWidth=!1),this.options.separateDialCode&&(this.options.allowDropdown=!0,this.options.nationalMode=!1,this.options.countrySearch=!0),!this.options.showFlags&&!this.options.separateDialCode&&(this.options.nationalMode=!1),this.options.useFullscreenPopup&&!this.options.dropdownContainer&&(this.options.dropdownContainer=document.body),this.isAndroid=typeof navigator<"u"?/Android/i.test(navigator.userAgent):!1,this.isRTL=!!this.telInput.closest("[dir=rtl]"),this.options.separateDialCode&&(this.isRTL?this.originalPaddingRight=this.telInput.style.paddingRight:this.originalPaddingLeft=this.telInput.style.paddingLeft),this.options.i18n={...T,...this.options.i18n};const c=new Promise((m,g)=>{this.resolveAutoCountryPromise=m,this.rejectAutoCountryPromise=g}),l=new Promise((m,g)=>{this.resolveUtilsScriptPromise=m,this.rejectUtilsScriptPromise=g});this.promise=Promise.all([c,l]),this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}_processCountryData(){this._processAllCountries(),this._processDialCodes(),this._translateCountryNames(),this.options.countryOrder&&(this.options.countryOrder=this.options.countryOrder.map(c=>c.toLowerCase())),this._sortCountries()}_sortCountries(){this.countries.sort((c,l)=>{const{countryOrder:m}=this.options;if(m){const g=m.indexOf(c.iso2),E=m.indexOf(l.iso2),L=g>-1,I=E>-1;if(L||I)return L&&I?g-E:L?-1:1}return c.name<l.name?-1:c.name>l.name?1:0})}_addToDialCodeMap(c,l,m){l.length>this.dialCodeMaxLen&&(this.dialCodeMaxLen=l.length),this.dialCodeToIso2Map.hasOwnProperty(l)||(this.dialCodeToIso2Map[l]=[]);for(let E=0;E<this.dialCodeToIso2Map[l].length;E++)if(this.dialCodeToIso2Map[l][E]===c)return;const g=m!==void 0?m:this.dialCodeToIso2Map[l].length;this.dialCodeToIso2Map[l][g]=c}_processAllCountries(){const{onlyCountries:c,excludeCountries:l}=this.options;if(c.length){const m=c.map(g=>g.toLowerCase());this.countries=C.filter(g=>m.indexOf(g.iso2)>-1)}else if(l.length){const m=l.map(g=>g.toLowerCase());this.countries=C.filter(g=>m.indexOf(g.iso2)===-1)}else this.countries=C}_translateCountryNames(){for(let c=0;c<this.countries.length;c++){const l=this.countries[c].iso2.toLowerCase();this.options.i18n.hasOwnProperty(l)&&(this.countries[c].name=this.options.i18n[l])}}_processDialCodes(){this.dialCodes={},this.dialCodeMaxLen=0,this.dialCodeToIso2Map={};for(let c=0;c<this.countries.length;c++){const l=this.countries[c];this.dialCodes[l.dialCode]||(this.dialCodes[l.dialCode]=!0),this._addToDialCodeMap(l.iso2,l.dialCode,l.priority)}for(let c=0;c<this.countries.length;c++){const l=this.countries[c];if(l.areaCodes){const m=this.dialCodeToIso2Map[l.dialCode][0];for(let g=0;g<l.areaCodes.length;g++){const E=l.areaCodes[g];for(let L=1;L<E.length;L++){const I=l.dialCode+E.substr(0,L);this._addToDialCodeMap(m,I),this._addToDialCodeMap(l.iso2,I)}this._addToDialCodeMap(l.iso2,l.dialCode+E)}}}}_generateMarkup(){var oe;this.telInput.classList.add("iti__tel-input"),!this.telInput.hasAttribute("autocomplete")&&!(this.telInput.form&&this.telInput.form.hasAttribute("autocomplete"))&&this.telInput.setAttribute("autocomplete","off");const{allowDropdown:c,separateDialCode:l,showFlags:m,containerClass:g,hiddenInput:E,dropdownContainer:L,fixDropdownWidth:I,useFullscreenPopup:$,countrySearch:j,i18n:G}=this.options;let F="iti";c&&(F+=" iti--allow-dropdown"),m&&(F+=" iti--show-flags"),g&&(F+=` ${g}`),$||(F+=" iti--inline-dropdown");const K=O("div",{class:F});if((oe=this.telInput.parentNode)==null||oe.insertBefore(K,this.telInput),c||m){this.countryContainer=O("div",{class:"iti__country-container"},K),c?(this.selectedCountry=O("button",{type:"button",class:"iti__selected-country","aria-expanded":"false","aria-label":this.options.i18n.selectedCountryAriaLabel,"aria-haspopup":"true","aria-controls":`iti-${this.id}__dropdown-content`,role:"combobox"},this.countryContainer),this.telInput.disabled&&this.selectedCountry.setAttribute("disabled","true")):this.selectedCountry=O("div",{class:"iti__selected-country"},this.countryContainer);const ce=O("div",{class:"iti__selected-country-primary"},this.selectedCountry);if(this.selectedCountryInner=O("div",null,ce),this.selectedCountryA11yText=O("span",{class:"iti__a11y-text"},this.selectedCountryInner),c&&(this.dropdownArrow=O("div",{class:"iti__arrow","aria-hidden":"true"},ce)),l&&(this.selectedDialCode=O("div",{class:"iti__selected-dial-code"},this.selectedCountry)),c){const ee=I?"":"iti--flexible-dropdown-width";if(this.dropdownContent=O("div",{id:`iti-${this.id}__dropdown-content`,class:`iti__dropdown-content iti__hide ${ee}`}),j&&(this.searchInput=O("input",{type:"text",class:"iti__search-input",placeholder:G.searchPlaceholder,role:"combobox","aria-expanded":"true","aria-label":G.searchPlaceholder,"aria-controls":`iti-${this.id}__country-listbox`,"aria-autocomplete":"list",autocomplete:"off"},this.dropdownContent),this.searchResultsA11yText=O("span",{class:"iti__a11y-text"},this.dropdownContent)),this.countryList=O("ul",{class:"iti__country-list",id:`iti-${this.id}__country-listbox`,role:"listbox","aria-label":G.countryListAriaLabel},this.dropdownContent),this._appendListItems(),j&&this._updateSearchResultsText(),L){let ve="iti iti--container";$?ve+=" iti--fullscreen-popup":ve+=" iti--inline-dropdown",this.dropdown=O("div",{class:ve}),this.dropdown.appendChild(this.dropdownContent)}else this.countryContainer.appendChild(this.dropdownContent)}}if(K.appendChild(this.telInput),E){const ce=this.telInput.getAttribute("name")||"",ee=E(ce);ee.phone&&(this.hiddenInput=O("input",{type:"hidden",name:ee.phone}),K.appendChild(this.hiddenInput)),ee.country&&(this.hiddenInputCountry=O("input",{type:"hidden",name:ee.country}),K.appendChild(this.hiddenInputCountry))}}_appendListItems(){for(let c=0;c<this.countries.length;c++){const l=this.countries[c],m=c===0?"iti__highlight":"",g=O("li",{id:`iti-${this.id}__item-${l.iso2}`,class:`iti__country ${m}`,tabindex:"-1",role:"option","data-dial-code":l.dialCode,"data-country-code":l.iso2,"aria-selected":"false"},this.countryList);l.nodeById[this.id]=g;let E="";this.options.showFlags&&(E+=`<div class='iti__flag-box'><div class='iti__flag iti__${l.iso2}'></div></div>`),E+=`<span class='iti__country-name'>${l.name}</span>`,E+=`<span class='iti__dial-code'>+${l.dialCode}</span>`,g.insertAdjacentHTML("beforeend",E)}}_setInitialState(c=!1){const l=this.telInput.getAttribute("value"),m=this.telInput.value,E=l&&l.charAt(0)==="+"&&(!m||m.charAt(0)!=="+")?l:m,L=this._getDialCode(E),I=W(E),{initialCountry:$,geoIpLookup:j}=this.options,G=$==="auto"&&j;if(L&&!I)this._updateCountryFromNumber(E);else if(!G||c){const F=$?$.toLowerCase():"";F&&this._getCountryData(F,!0)?this._setCountry(F):L&&I?this._setCountry("us"):this._setCountry()}E&&this._updateValFromNumber(E)}_initListeners(){this._initTelInputListeners(),this.options.allowDropdown&&this._initDropdownListeners(),(this.hiddenInput||this.hiddenInputCountry)&&this.telInput.form&&this._initHiddenInputListener()}_initHiddenInputListener(){var c;this._handleHiddenInputSubmit=()=>{this.hiddenInput&&(this.hiddenInput.value=this.getNumber()),this.hiddenInputCountry&&(this.hiddenInputCountry.value=this.getSelectedCountryData().iso2||"")},(c=this.telInput.form)==null||c.addEventListener("submit",this._handleHiddenInputSubmit)}_initDropdownListeners(){this._handleLabelClick=l=>{this.dropdownContent.classList.contains("iti__hide")?this.telInput.focus():l.preventDefault()};const c=this.telInput.closest("label");c&&c.addEventListener("click",this._handleLabelClick),this._handleClickSelectedCountry=()=>{this.dropdownContent.classList.contains("iti__hide")&&!this.telInput.disabled&&!this.telInput.readOnly&&this._openDropdown()},this.selectedCountry.addEventListener("click",this._handleClickSelectedCountry),this._handleCountryContainerKeydown=l=>{this.dropdownContent.classList.contains("iti__hide")&&["ArrowUp","ArrowDown"," ","Enter"].includes(l.key)&&(l.preventDefault(),l.stopPropagation(),this._openDropdown()),l.key==="Tab"&&this._closeDropdown()},this.countryContainer.addEventListener("keydown",this._handleCountryContainerKeydown)}_initRequests(){const{utilsScript:c,initialCountry:l,geoIpLookup:m}=this.options;c&&!_.utils?_.documentReady()?_.loadUtils(c):window.addEventListener("load",()=>{_.loadUtils(c)}):this.resolveUtilsScriptPromise(),l==="auto"&&m&&!this.selectedCountryData.iso2?this._loadAutoCountry():this.resolveAutoCountryPromise()}_loadAutoCountry(){_.autoCountry?this.handleAutoCountry():_.startedLoadingAutoCountry||(_.startedLoadingAutoCountry=!0,typeof this.options.geoIpLookup=="function"&&this.options.geoIpLookup((c="")=>{const l=c.toLowerCase();l&&this._getCountryData(l,!0)?(_.autoCountry=l,setTimeout(()=>B("handleAutoCountry"))):(this._setInitialState(!0),B("rejectAutoCountryPromise"))},()=>{this._setInitialState(!0),B("rejectAutoCountryPromise")}))}_initTelInputListeners(){const{strictMode:c,formatAsYouType:l,separateDialCode:m,formatOnDisplay:g}=this.options;let E=!1;const L=()=>{this._openDropdown(),this.searchInput.value="+",this._filterCountries("",!0)};this._handleInputEvent=I=>{if(this.isAndroid&&(I==null?void 0:I.data)==="+"&&m){const F=this.telInput.selectionStart||0,K=this.telInput.value.substring(0,F-1),oe=this.telInput.value.substring(F);this.telInput.value=K+oe,L();return}this._updateCountryFromNumber(this.telInput.value)&&this._triggerCountryChange();const $=(I==null?void 0:I.data)&&/[^+0-9]/.test(I.data),j=(I==null?void 0:I.inputType)==="insertFromPaste"&&this.telInput.value;$||j&&!c?E=!0:/[^+0-9]/.test(this.telInput.value)||(E=!1);const G=(I==null?void 0:I.detail)&&I.detail.isSetNumber&&!g;if(l&&!E&&!G){const F=this.telInput.selectionStart||0,oe=this.telInput.value.substring(0,F).replace(/[^+0-9]/g,"").length,ce=(I==null?void 0:I.inputType)==="deleteContentForward",ee=this._formatNumberAsYouType(),ve=P(oe,ee,F,ce);this.telInput.value=ee,this.telInput.setSelectionRange(ve,ve)}},this.telInput.addEventListener("input",this._handleInputEvent),(c||m)&&(this._handleKeydownEvent=I=>{if(I.key&&I.key.length===1&&!I.altKey&&!I.ctrlKey&&!I.metaKey){if(m&&I.key==="+"){I.preventDefault(),L();return}if(c){const $=this.telInput.selectionStart===0&&I.key==="+",j=/^[0-9]$/.test(I.key),G=$||j,F=this._getFullNumber(),K=_.utils.getCoreNumber(F,this.selectedCountryData.iso2),oe=this.maxCoreNumberLength&&K.length>=this.maxCoreNumberLength,ce=this.telInput.value.substring(this.telInput.selectionStart,this.telInput.selectionEnd),ee=/\d/.test(ce);(!G||oe&&!ee)&&I.preventDefault()}}},this.telInput.addEventListener("keydown",this._handleKeydownEvent))}_cap(c){const l=parseInt(this.telInput.getAttribute("maxlength")||"",10);return l&&c.length>l?c.substr(0,l):c}_trigger(c,l={}){const m=new CustomEvent(c,{bubbles:!0,cancelable:!0,detail:l});this.telInput.dispatchEvent(m)}_openDropdown(){const{fixDropdownWidth:c,countrySearch:l}=this.options;if(c&&(this.dropdownContent.style.width=`${this.telInput.offsetWidth}px`),this.dropdownContent.classList.remove("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","true"),this._setDropdownPosition(),l){const m=this.countryList.firstElementChild;m&&(this._highlightListItem(m,!1),this.countryList.scrollTop=0),this.searchInput.focus()}this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}_setDropdownPosition(){if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.options.useFullscreenPopup){const c=this.telInput.getBoundingClientRect(),l=this.telInput.offsetHeight;this.options.dropdownContainer&&(this.dropdown.style.top=`${c.top+l}px`,this.dropdown.style.left=`${c.left}px`,this._handleWindowScroll=()=>this._closeDropdown(),window.addEventListener("scroll",this._handleWindowScroll))}}_bindDropdownListeners(){this._handleMouseoverCountryList=g=>{var L;const E=(L=g.target)==null?void 0:L.closest(".iti__country");E&&this._highlightListItem(E,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=g=>{var L;const E=(L=g.target)==null?void 0:L.closest(".iti__country");E&&this._selectListItem(E)},this.countryList.addEventListener("click",this._handleClickCountryList);let c=!0;this._handleClickOffToClose=()=>{c||this._closeDropdown(),c=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);let l="",m=null;if(this._handleKeydownOnDropdown=g=>{["ArrowUp","ArrowDown","Enter","Escape"].includes(g.key)&&(g.preventDefault(),g.stopPropagation(),g.key==="ArrowUp"||g.key==="ArrowDown"?this._handleUpDownKey(g.key):g.key==="Enter"?this._handleEnterKey():g.key==="Escape"&&this._closeDropdown()),!this.options.countrySearch&&/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(g.key)&&(g.stopPropagation(),m&&clearTimeout(m),l+=g.key.toLowerCase(),this._searchForCountry(l),m=setTimeout(()=>{l=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch){const g=()=>{const L=this.searchInput.value.trim();L?this._filterCountries(L):this._filterCountries("",!0)};let E=null;this._handleSearchChange=()=>{E&&clearTimeout(E),E=setTimeout(()=>{g(),E=null},100)},this.searchInput.addEventListener("input",this._handleSearchChange),this.searchInput.addEventListener("click",L=>L.stopPropagation())}}_searchForCountry(c){for(let l=0;l<this.countries.length;l++){const m=this.countries[l];if(m.name.substr(0,c.length).toLowerCase()===c){const E=m.nodeById[this.id];this._highlightListItem(E,!1),this._scrollTo(E);break}}}_filterCountries(c,l=!1){let m=!0;this.countryList.innerHTML="";const g=q(c);for(let E=0;E<this.countries.length;E++){const L=this.countries[E],I=q(L.name),$=`+${L.dialCode}`;if(l||I.includes(g)||$.includes(g)||L.iso2.includes(g)){const j=L.nodeById[this.id];j&&this.countryList.appendChild(j),m&&(this._highlightListItem(j,!1),m=!1)}}m&&this._highlightListItem(null,!1),this.countryList.scrollTop=0,this._updateSearchResultsText()}_updateSearchResultsText(){const{i18n:c}=this.options,l=this.countryList.childElementCount;let m;l===0?m=c.zeroSearchResults:l===1?m=c.oneSearchResult:m=c.multipleSearchResults.replace("${count}",l.toString()),this.searchResultsA11yText.textContent=m}_handleUpDownKey(c){var m,g;let l=c==="ArrowUp"?(m=this.highlightedItem)==null?void 0:m.previousElementSibling:(g=this.highlightedItem)==null?void 0:g.nextElementSibling;!l&&this.countryList.childElementCount>1&&(l=c==="ArrowUp"?this.countryList.lastElementChild:this.countryList.firstElementChild),l&&(this._scrollTo(l),this._highlightListItem(l,!1))}_handleEnterKey(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}_updateValFromNumber(c){let l=c;if(this.options.formatOnDisplay&&_.utils&&this.selectedCountryData){const m=this.options.nationalMode||l.charAt(0)!=="+"&&!this.options.separateDialCode,{NATIONAL:g,INTERNATIONAL:E}=_.utils.numberFormat,L=m?g:E;l=_.utils.formatNumber(l,this.selectedCountryData.iso2,L)}l=this._beforeSetNumber(l),this.telInput.value=l}_updateCountryFromNumber(c){const l=c.indexOf("+");let m=l?c.substring(l):c;const g=this.selectedCountryData.dialCode;m&&g==="1"&&m.charAt(0)!=="+"&&(m.charAt(0)!=="1"&&(m=`1${m}`),m=`+${m}`),this.options.separateDialCode&&g&&m.charAt(0)!=="+"&&(m=`+${g}${m}`);const L=this._getDialCode(m,!0),I=k(m);let $=null;if(L){const j=this.dialCodeToIso2Map[k(L)],G=j.indexOf(this.selectedCountryData.iso2)!==-1&&I.length<=L.length-1;if(!(g==="1"&&W(I))&&!G){for(let K=0;K<j.length;K++)if(j[K]){$=j[K];break}}}else m.charAt(0)==="+"&&I.length?$="":(!m||m==="+")&&!this.selectedCountryData.iso2&&($=this.defaultCountry);return $!==null?this._setCountry($):!1}_highlightListItem(c,l){const m=this.highlightedItem;if(m&&(m.classList.remove("iti__highlight"),m.setAttribute("aria-selected","false")),this.highlightedItem=c,this.highlightedItem){this.highlightedItem.classList.add("iti__highlight"),this.highlightedItem.setAttribute("aria-selected","true");const g=this.highlightedItem.getAttribute("id")||"";this.selectedCountry.setAttribute("aria-activedescendant",g),this.options.countrySearch&&this.searchInput.setAttribute("aria-activedescendant",g)}l&&this.highlightedItem.focus()}_getCountryData(c,l){for(let m=0;m<this.countries.length;m++)if(this.countries[m].iso2===c)return this.countries[m];if(l)return null;throw new Error(`No country data for '${c}'`)}_setCountry(c){const{separateDialCode:l,showFlags:m,i18n:g}=this.options,E=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=c?this._getCountryData(c,!1)||{}:{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),this.selectedCountryInner){let L="",I="";c&&m?(L=`iti__flag iti__${c}`,I=`${this.selectedCountryData.name} +${this.selectedCountryData.dialCode}`):(L="iti__flag iti__globe",I=g.noCountrySelected),this.selectedCountryInner.className=L,this.selectedCountryA11yText.textContent=I}if(this._setSelectedCountryTitleAttribute(c,l),l){const L=this.selectedCountryData.dialCode?`+${this.selectedCountryData.dialCode}`:"";this.selectedDialCode.innerHTML=L;const $=(this.selectedCountry.offsetWidth||this._getHiddenSelectedCountryWidth())+8;this.isRTL?this.telInput.style.paddingRight=`${$}px`:this.telInput.style.paddingLeft=`${$}px`}return this._updatePlaceholder(),this._updateMaxLength(),E.iso2!==c}_updateMaxLength(){const{strictMode:c,placeholderNumberType:l,validationNumberType:m}=this.options;if(c&&_.utils)if(this.selectedCountryData.iso2){const g=_.utils.numberType[l];let E=_.utils.getExampleNumber(this.selectedCountryData.iso2,!1,g,!0),L=E;for(;_.utils.isPossibleNumber(E,this.selectedCountryData.iso2,m);)L=E,E+="0";const I=_.utils.getCoreNumber(L,this.selectedCountryData.iso2);this.maxCoreNumberLength=I.length}else this.maxCoreNumberLength=null}_setSelectedCountryTitleAttribute(c=null,l){if(!this.selectedCountry)return;let m;c&&!l?m=`${this.selectedCountryData.name}: +${this.selectedCountryData.dialCode}`:c?m=this.selectedCountryData.name:m="Unknown",this.selectedCountry.setAttribute("title",m)}_getHiddenSelectedCountryWidth(){if(this.telInput.parentNode){const c=this.telInput.parentNode.cloneNode(!1);c.style.visibility="hidden",document.body.appendChild(c);const l=this.countryContainer.cloneNode();c.appendChild(l);const m=this.selectedCountry.cloneNode(!0);l.appendChild(m);const g=m.offsetWidth;return document.body.removeChild(c),g}return 0}_updatePlaceholder(){const{autoPlaceholder:c,placeholderNumberType:l,nationalMode:m,customPlaceholder:g}=this.options,E=c==="aggressive"||!this.hadInitialPlaceholder&&c==="polite";if(_.utils&&E){const L=_.utils.numberType[l];let I=this.selectedCountryData.iso2?_.utils.getExampleNumber(this.selectedCountryData.iso2,m,L):"";I=this._beforeSetNumber(I),typeof g=="function"&&(I=g(I,this.selectedCountryData)),this.telInput.setAttribute("placeholder",I)}}_selectListItem(c){const l=this._setCountry(c.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(c.getAttribute("data-dial-code")),this.telInput.focus(),l&&this._triggerCountryChange()}_closeDropdown(){this.dropdownContent.classList.add("iti__hide"),this.selectedCountry.setAttribute("aria-expanded","false"),this.selectedCountry.removeAttribute("aria-activedescendant"),this.highlightedItem&&this.highlightedItem.setAttribute("aria-selected","false"),this.options.countrySearch&&this.searchInput.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),this.options.countrySearch&&this.searchInput.removeEventListener("input",this._handleSearchChange),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.options.useFullscreenPopup||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}_scrollTo(c){const l=this.countryList,m=document.documentElement.scrollTop,g=l.offsetHeight,E=l.getBoundingClientRect().top+m,L=E+g,I=c.offsetHeight,$=c.getBoundingClientRect().top+m,j=$+I,G=$-E+l.scrollTop;if($<E)l.scrollTop=G;else if(j>L){const F=g-I;l.scrollTop=G-F}}_updateDialCode(c){const l=this.telInput.value,m=`+${c}`;let g;if(l.charAt(0)==="+"){const E=this._getDialCode(l);E?g=l.replace(E,m):g=m,this.telInput.value=g}}_getDialCode(c,l){let m="";if(c.charAt(0)==="+"){let g="";for(let E=0;E<c.length;E++){const L=c.charAt(E);if(!isNaN(parseInt(L,10))){if(g+=L,l)this.dialCodeToIso2Map[g]&&(m=c.substr(0,E+1));else if(this.dialCodes[g]){m=c.substr(0,E+1);break}if(g.length===this.dialCodeMaxLen)break}}}return m}_getFullNumber(){const c=this.telInput.value.trim(),{dialCode:l}=this.selectedCountryData;let m;const g=k(c);return this.options.separateDialCode&&c.charAt(0)!=="+"&&l&&g?m=`+${l}`:m="",m+c}_beforeSetNumber(c){let l=c;if(this.options.separateDialCode){let m=this._getDialCode(l);if(m){m=`+${this.selectedCountryData.dialCode}`;const g=l[m.length]===" "||l[m.length]==="-"?m.length+1:m.length;l=l.substr(g)}}return this._cap(l)}_triggerCountryChange(){this._trigger("countrychange")}_formatNumberAsYouType(){const c=this._getFullNumber(),l=_.utils?_.utils.formatNumberAsYouType(c,this.selectedCountryData.iso2):c,{dialCode:m}=this.selectedCountryData;return this.options.separateDialCode&&this.telInput.value.charAt(0)!=="+"&&l.includes(`+${m}`)?(l.split(`+${m}`)[1]||"").trim():l}handleAutoCountry(){this.options.initialCountry==="auto"&&_.autoCountry&&(this.defaultCountry=_.autoCountry,this.selectedCountryData.iso2||this.selectedCountryInner.classList.contains("iti__globe")||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}handleUtils(){_.utils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this.selectedCountryData.iso2&&(this._updatePlaceholder(),this._updateMaxLength())),this.resolveUtilsScriptPromise()}destroy(){var E,L;const{allowDropdown:c,separateDialCode:l}=this.options;if(c){this._closeDropdown(),this.selectedCountry.removeEventListener("click",this._handleClickSelectedCountry),this.countryContainer.removeEventListener("keydown",this._handleCountryContainerKeydown);const I=this.telInput.closest("label");I&&I.removeEventListener("click",this._handleLabelClick)}const{form:m}=this.telInput;this._handleHiddenInputSubmit&&m&&m.removeEventListener("submit",this._handleHiddenInputSubmit),this.telInput.removeEventListener("input",this._handleInputEvent),this._handleKeydownEvent&&this.telInput.removeEventListener("keydown",this._handleKeydownEvent),this.telInput.removeAttribute("data-intl-tel-input-id"),l&&(this.isRTL?this.telInput.style.paddingRight=this.originalPaddingRight:this.telInput.style.paddingLeft=this.originalPaddingLeft);const g=this.telInput.parentNode;(E=g==null?void 0:g.parentNode)==null||E.insertBefore(this.telInput,g),(L=g==null?void 0:g.parentNode)==null||L.removeChild(g),delete _.instances[this.id]}getExtension(){return _.utils?_.utils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}getNumber(c){if(_.utils){const{iso2:l}=this.selectedCountryData;return _.utils.formatNumber(this._getFullNumber(),l,c)}return""}getNumberType(){return _.utils?_.utils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}getSelectedCountryData(){return this.selectedCountryData}getValidationError(){if(_.utils){const{iso2:c}=this.selectedCountryData;return _.utils.getValidationError(this._getFullNumber(),c)}return-99}isValidNumber(){const c=this._getFullNumber();return new RegExp("\\p{L}","u").test(c)?!1:_.utils?_.utils.isPossibleNumber(c,this.selectedCountryData.iso2,this.options.validationNumberType):null}isValidNumberPrecise(){const c=this._getFullNumber();return new RegExp("\\p{L}","u").test(c)?!1:_.utils?_.utils.isValidNumber(c,this.selectedCountryData.iso2):null}setCountry(c){const l=c==null?void 0:c.toLowerCase(),m=this.selectedCountryData.iso2;(c&&l!==m||!c&&m)&&(this._setCountry(l),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}setNumber(c){const l=this._updateCountryFromNumber(c);this._updateValFromNumber(c),l&&this._triggerCountryChange(),this._trigger("input",{isSetNumber:!0})}setPlaceholderNumberType(c){this.options.placeholderNumberType=c,this._updatePlaceholder()}},me=c=>!_.utils&&!_.startedLoadingUtilsScript?(_.startedLoadingUtilsScript=!0,new Promise((l,m)=>{import(c).then(({default:g})=>{_.utils=g,B("handleUtils"),l(!0)}).catch(()=>{B("rejectUtilsScriptPromise"),m()})})):null,_=Object.assign((c,l)=>{const m=new ae(c,l);return m._init(),c.setAttribute("data-intl-tel-input-id",m.id.toString()),_.instances[m.id]=m,m},{defaults:D,documentReady:()=>document.readyState==="complete",getCountryData:()=>C,getInstance:c=>{const l=c.getAttribute("data-intl-tel-input-id");return l?_.instances[l]:null},instances:{},loadUtils:me,version:"23.6.0"}),pe=_;return u(h)})();return e.default})})(rn);var Yn=rn.exports;const an=sn(Yn);class Q{static toggle(){document.querySelector(".modal").innerHTML="",document.body.classList.toggle("open")}}function on(n,e){return function(){return n.apply(e,arguments)}}const{toString:Zn}=Object.prototype,{getPrototypeOf:_t}=Object,Ye=(n=>e=>{const t=Zn.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),se=n=>(n=n.toLowerCase(),e=>Ye(e)===n),Ze=n=>e=>typeof e===n,{isArray:Ae}=Array,Ne=Ze("undefined");function Qn(n){return n!==null&&!Ne(n)&&n.constructor!==null&&!Ne(n.constructor)&&X(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const cn=se("ArrayBuffer");function Xn(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&cn(n.buffer),e}const es=Ze("string"),X=Ze("function"),ln=Ze("number"),Qe=n=>n!==null&&typeof n=="object",ts=n=>n===!0||n===!1,$e=n=>{if(Ye(n)!=="object")return!1;const e=_t(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},ns=se("Date"),ss=se("File"),is=se("Blob"),rs=se("FileList"),as=n=>Qe(n)&&X(n.pipe),os=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||X(n.append)&&((e=Ye(n))==="formdata"||e==="object"&&X(n.toString)&&n.toString()==="[object FormData]"))},cs=se("URLSearchParams"),[ls,ds,us,hs]=["ReadableStream","Request","Response","Headers"].map(se),ms=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function De(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let s,i;if(typeof n!="object"&&(n=[n]),Ae(n))for(s=0,i=n.length;s<i;s++)e.call(null,n[s],s,n);else{const r=t?Object.getOwnPropertyNames(n):Object.keys(n),a=r.length;let o;for(s=0;s<a;s++)o=r[s],e.call(null,n[o],o,n)}}function dn(n,e){e=e.toLowerCase();const t=Object.keys(n);let s=t.length,i;for(;s-- >0;)if(i=t[s],e===i.toLowerCase())return i;return null}const un=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,hn=n=>!Ne(n)&&n!==un;function ot(){const{caseless:n}=hn(this)&&this||{},e={},t=(s,i)=>{const r=n&&dn(e,i)||i;$e(e[r])&&$e(s)?e[r]=ot(e[r],s):$e(s)?e[r]=ot({},s):Ae(s)?e[r]=s.slice():e[r]=s};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&De(arguments[s],t);return e}const ps=(n,e,t,{allOwnKeys:s}={})=>(De(e,(i,r)=>{t&&X(i)?n[r]=on(i,t):n[r]=i},{allOwnKeys:s}),n),fs=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),ys=(n,e,t,s)=>{n.prototype=Object.create(e.prototype,s),n.prototype.constructor=n,Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},gs=(n,e,t,s)=>{let i,r,a;const o={};if(e=e||{},n==null)return e;do{for(i=Object.getOwnPropertyNames(n),r=i.length;r-- >0;)a=i[r],(!s||s(a,n,e))&&!o[a]&&(e[a]=n[a],o[a]=!0);n=t!==!1&&_t(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},ws=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const s=n.indexOf(e,t);return s!==-1&&s===t},Es=n=>{if(!n)return null;if(Ae(n))return n;let e=n.length;if(!ln(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},vs=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&_t(Uint8Array)),Cs=(n,e)=>{const s=(n&&n[Symbol.iterator]).call(n);let i;for(;(i=s.next())&&!i.done;){const r=i.value;e.call(n,r[0],r[1])}},bs=(n,e)=>{let t;const s=[];for(;(t=n.exec(e))!==null;)s.push(t);return s},Ss=se("HTMLFormElement"),Ts=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,s,i){return s.toUpperCase()+i}),Bt=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),Ls=se("RegExp"),mn=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),s={};De(t,(i,r)=>{let a;(a=e(i,r,n))!==!1&&(s[r]=a||i)}),Object.defineProperties(n,s)},Is=n=>{mn(n,(e,t)=>{if(X(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const s=n[t];if(X(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},As=(n,e)=>{const t={},s=i=>{i.forEach(r=>{t[r]=!0})};return Ae(n)?s(n):s(String(n).split(e)),t},_s=()=>{},xs=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e,st="abcdefghijklmnopqrstuvwxyz",Ut="0123456789",pn={DIGIT:Ut,ALPHA:st,ALPHA_DIGIT:st+st.toUpperCase()+Ut},Ns=(n=16,e=pn.ALPHA_DIGIT)=>{let t="";const{length:s}=e;for(;n--;)t+=e[Math.random()*s|0];return t};function Ms(n){return!!(n&&X(n.append)&&n[Symbol.toStringTag]==="FormData"&&n[Symbol.iterator])}const Ds=n=>{const e=new Array(10),t=(s,i)=>{if(Qe(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[i]=s;const r=Ae(s)?[]:{};return De(s,(a,o)=>{const u=t(a,i+1);!Ne(u)&&(r[o]=u)}),e[i]=void 0,r}}return s};return t(n,0)},Rs=se("AsyncFunction"),ks=n=>n&&(Qe(n)||X(n))&&X(n.then)&&X(n.catch),p={isArray:Ae,isArrayBuffer:cn,isBuffer:Qn,isFormData:os,isArrayBufferView:Xn,isString:es,isNumber:ln,isBoolean:ts,isObject:Qe,isPlainObject:$e,isReadableStream:ls,isRequest:ds,isResponse:us,isHeaders:hs,isUndefined:Ne,isDate:ns,isFile:ss,isBlob:is,isRegExp:Ls,isFunction:X,isStream:as,isURLSearchParams:cs,isTypedArray:vs,isFileList:rs,forEach:De,merge:ot,extend:ps,trim:ms,stripBOM:fs,inherits:ys,toFlatObject:gs,kindOf:Ye,kindOfTest:se,endsWith:ws,toArray:Es,forEachEntry:Cs,matchAll:bs,isHTMLForm:Ss,hasOwnProperty:Bt,hasOwnProp:Bt,reduceDescriptors:mn,freezeMethods:Is,toObjectSet:As,toCamelCase:Ts,noop:_s,toFiniteNumber:xs,findKey:dn,global:un,isContextDefined:hn,ALPHABET:pn,generateString:Ns,isSpecCompliantForm:Ms,toJSONObject:Ds,isAsyncFn:Rs,isThenable:ks};function R(n,e,t,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=n,this.name="AxiosError",e&&(this.code=e),t&&(this.config=t),s&&(this.request=s),i&&(this.response=i)}p.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const fn=R.prototype,yn={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(n=>{yn[n]={value:n}});Object.defineProperties(R,yn);Object.defineProperty(fn,"isAxiosError",{value:!0});R.from=(n,e,t,s,i,r)=>{const a=Object.create(fn);return p.toFlatObject(n,a,function(u){return u!==Error.prototype},o=>o!=="isAxiosError"),R.call(a,n.message,e,t,s,i),a.cause=n,a.name=n.name,r&&Object.assign(a,r),a};const qs=null;function ct(n){return p.isPlainObject(n)||p.isArray(n)}function gn(n){return p.endsWith(n,"[]")?n.slice(0,-2):n}function Ft(n,e,t){return n?n.concat(e).map(function(i,r){return i=gn(i),!t&&r?"["+i+"]":i}).join(t?".":""):e}function Os(n){return p.isArray(n)&&!n.some(ct)}const Ps=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function Xe(n,e,t){if(!p.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=p.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,M){return!p.isUndefined(M[T])});const s=t.metaTokens,i=t.visitor||d,r=t.dots,a=t.indexes,u=(t.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(i))throw new TypeError("visitor must be a function");function h(b){if(b===null)return"";if(p.isDate(b))return b.toISOString();if(!u&&p.isBlob(b))throw new R("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(b)||p.isTypedArray(b)?u&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function d(b,T,M){let D=b;if(b&&!M&&typeof b=="object"){if(p.endsWith(T,"{}"))T=s?T:T.slice(0,-2),b=JSON.stringify(b);else if(p.isArray(b)&&Os(b)||(p.isFileList(b)||p.endsWith(T,"[]"))&&(D=p.toArray(b)))return T=gn(T),D.forEach(function(k,q){!(p.isUndefined(k)||k===null)&&e.append(a===!0?Ft([T],q,r):a===null?T:T+"[]",h(k))}),!1}return ct(b)?!0:(e.append(Ft(M,T,r),h(b)),!1)}const f=[],C=Object.assign(Ps,{defaultVisitor:d,convertValue:h,isVisitable:ct});function v(b,T){if(!p.isUndefined(b)){if(f.indexOf(b)!==-1)throw Error("Circular reference detected in "+T.join("."));f.push(b),p.forEach(b,function(D,H){(!(p.isUndefined(D)||D===null)&&i.call(e,D,p.isString(H)?H.trim():H,T,C))===!0&&v(D,T?T.concat(H):[H])}),f.pop()}}if(!p.isObject(n))throw new TypeError("data must be an object");return v(n),e}function jt(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function xt(n,e){this._pairs=[],n&&Xe(n,this,e)}const wn=xt.prototype;wn.append=function(e,t){this._pairs.push([e,t])};wn.toString=function(e){const t=e?function(s){return e.call(this,s,jt)}:jt;return this._pairs.map(function(i){return t(i[0])+"="+t(i[1])},"").join("&")};function $s(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function En(n,e,t){if(!e)return n;const s=t&&t.encode||$s,i=t&&t.serialize;let r;if(i?r=i(e,t):r=p.isURLSearchParams(e)?e.toString():new xt(e,t).toString(s),r){const a=n.indexOf("#");a!==-1&&(n=n.slice(0,a)),n+=(n.indexOf("?")===-1?"?":"&")+r}return n}class zt{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(s){s!==null&&e(s)})}}const vn={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hs=typeof URLSearchParams<"u"?URLSearchParams:xt,Bs=typeof FormData<"u"?FormData:null,Us=typeof Blob<"u"?Blob:null,Fs={isBrowser:!0,classes:{URLSearchParams:Hs,FormData:Bs,Blob:Us},protocols:["http","https","file","blob","url","data"]},Nt=typeof window<"u"&&typeof document<"u",js=(n=>Nt&&["ReactNative","NativeScript","NS"].indexOf(n)<0)(typeof navigator<"u"&&navigator.product),zs=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vs=Nt&&window.location.href||"http://localhost",Ws=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Nt,hasStandardBrowserEnv:js,hasStandardBrowserWebWorkerEnv:zs,origin:Vs},Symbol.toStringTag,{value:"Module"})),ne={...Ws,...Fs};function Ks(n,e){return Xe(n,new ne.classes.URLSearchParams,Object.assign({visitor:function(t,s,i,r){return ne.isNode&&p.isBuffer(t)?(this.append(s,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}function Gs(n){return p.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Js(n){const e={},t=Object.keys(n);let s;const i=t.length;let r;for(s=0;s<i;s++)r=t[s],e[r]=n[r];return e}function Cn(n){function e(t,s,i,r){let a=t[r++];if(a==="__proto__")return!0;const o=Number.isFinite(+a),u=r>=t.length;return a=!a&&p.isArray(i)?i.length:a,u?(p.hasOwnProp(i,a)?i[a]=[i[a],s]:i[a]=s,!o):((!i[a]||!p.isObject(i[a]))&&(i[a]=[]),e(t,s,i[a],r)&&p.isArray(i[a])&&(i[a]=Js(i[a])),!o)}if(p.isFormData(n)&&p.isFunction(n.entries)){const t={};return p.forEachEntry(n,(s,i)=>{e(Gs(s),i,t,0)}),t}return null}function Ys(n,e,t){if(p.isString(n))try{return(e||JSON.parse)(n),p.trim(n)}catch(s){if(s.name!=="SyntaxError")throw s}return(t||JSON.stringify)(n)}const Re={transitional:vn,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",i=s.indexOf("application/json")>-1,r=p.isObject(e);if(r&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return i?JSON.stringify(Cn(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e)||p.isReadableStream(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(r){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ks(e,this.formSerializer).toString();if((o=p.isFileList(e))||s.indexOf("multipart/form-data")>-1){const u=this.env&&this.env.FormData;return Xe(o?{"files[]":e}:e,u&&new u,this.formSerializer)}}return r||i?(t.setContentType("application/json",!1),Ys(e)):e}],transformResponse:[function(e){const t=this.transitional||Re.transitional,s=t&&t.forcedJSONParsing,i=this.responseType==="json";if(p.isResponse(e)||p.isReadableStream(e))return e;if(e&&p.isString(e)&&(s&&!this.responseType||i)){const a=!(t&&t.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(o){if(a)throw o.name==="SyntaxError"?R.from(o,R.ERR_BAD_RESPONSE,this,null,this.response):o}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:ne.classes.FormData,Blob:ne.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],n=>{Re.headers[n]={}});const Zs=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Qs=n=>{const e={};let t,s,i;return n&&n.split(`
`).forEach(function(a){i=a.indexOf(":"),t=a.substring(0,i).trim().toLowerCase(),s=a.substring(i+1).trim(),!(!t||e[t]&&Zs[t])&&(t==="set-cookie"?e[t]?e[t].push(s):e[t]=[s]:e[t]=e[t]?e[t]+", "+s:s)}),e},Vt=Symbol("internals");function xe(n){return n&&String(n).trim().toLowerCase()}function He(n){return n===!1||n==null?n:p.isArray(n)?n.map(He):String(n)}function Xs(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=t.exec(n);)e[s[1]]=s[2];return e}const ei=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function it(n,e,t,s,i){if(p.isFunction(s))return s.call(this,e,t);if(i&&(e=t),!!p.isString(e)){if(p.isString(s))return e.indexOf(s)!==-1;if(p.isRegExp(s))return s.test(e)}}function ti(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}function ni(n,e){const t=p.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(n,s+t,{value:function(i,r,a){return this[s].call(this,e,i,r,a)},configurable:!0})})}let J=class{constructor(e){e&&this.set(e)}set(e,t,s){const i=this;function r(o,u,h){const d=xe(u);if(!d)throw new Error("header name must be a non-empty string");const f=p.findKey(i,d);(!f||i[f]===void 0||h===!0||h===void 0&&i[f]!==!1)&&(i[f||u]=He(o))}const a=(o,u)=>p.forEach(o,(h,d)=>r(h,d,u));if(p.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(p.isString(e)&&(e=e.trim())&&!ei(e))a(Qs(e),t);else if(p.isHeaders(e))for(const[o,u]of e.entries())r(u,o,s);else e!=null&&r(t,e,s);return this}get(e,t){if(e=xe(e),e){const s=p.findKey(this,e);if(s){const i=this[s];if(!t)return i;if(t===!0)return Xs(i);if(p.isFunction(t))return t.call(this,i,s);if(p.isRegExp(t))return t.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=xe(e),e){const s=p.findKey(this,e);return!!(s&&this[s]!==void 0&&(!t||it(this,this[s],s,t)))}return!1}delete(e,t){const s=this;let i=!1;function r(a){if(a=xe(a),a){const o=p.findKey(s,a);o&&(!t||it(s,s[o],o,t))&&(delete s[o],i=!0)}}return p.isArray(e)?e.forEach(r):r(e),i}clear(e){const t=Object.keys(this);let s=t.length,i=!1;for(;s--;){const r=t[s];(!e||it(this,this[r],r,e,!0))&&(delete this[r],i=!0)}return i}normalize(e){const t=this,s={};return p.forEach(this,(i,r)=>{const a=p.findKey(s,r);if(a){t[a]=He(i),delete t[r];return}const o=e?ti(r):String(r).trim();o!==r&&delete t[r],t[o]=He(i),s[o]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return p.forEach(this,(s,i)=>{s!=null&&s!==!1&&(t[i]=e&&p.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(i=>s.set(i)),s}static accessor(e){const s=(this[Vt]=this[Vt]={accessors:{}}).accessors,i=this.prototype;function r(a){const o=xe(a);s[o]||(ni(i,a),s[o]=!0)}return p.isArray(e)?e.forEach(r):r(e),this}};J.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(J.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(s){this[t]=s}}});p.freezeMethods(J);function rt(n,e){const t=this||Re,s=e||t,i=J.from(s.headers);let r=s.data;return p.forEach(n,function(o){r=o.call(t,r,i.normalize(),e?e.status:void 0)}),i.normalize(),r}function bn(n){return!!(n&&n.__CANCEL__)}function _e(n,e,t){R.call(this,n??"canceled",R.ERR_CANCELED,e,t),this.name="CanceledError"}p.inherits(_e,R,{__CANCEL__:!0});function Sn(n,e,t){const s=t.config.validateStatus;!t.status||!s||s(t.status)?n(t):e(new R("Request failed with status code "+t.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function si(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function ii(n,e){n=n||10;const t=new Array(n),s=new Array(n);let i=0,r=0,a;return e=e!==void 0?e:1e3,function(u){const h=Date.now(),d=s[r];a||(a=h),t[i]=u,s[i]=h;let f=r,C=0;for(;f!==i;)C+=t[f++],f=f%n;if(i=(i+1)%n,i===r&&(r=(r+1)%n),h-a<e)return;const v=d&&h-d;return v?Math.round(C*1e3/v):void 0}}function ri(n,e){let t=0;const s=1e3/e;let i=null;return function(){const a=this===!0,o=Date.now();if(a||o-t>s)return i&&(clearTimeout(i),i=null),t=o,n.apply(null,arguments);i||(i=setTimeout(()=>(i=null,t=Date.now(),n.apply(null,arguments)),s-(o-t)))}}const je=(n,e,t=3)=>{let s=0;const i=ii(50,250);return ri(r=>{const a=r.loaded,o=r.lengthComputable?r.total:void 0,u=a-s,h=i(u),d=a<=o;s=a;const f={loaded:a,total:o,progress:o?a/o:void 0,bytes:u,rate:h||void 0,estimated:h&&o&&d?(o-a)/h:void 0,event:r,lengthComputable:o!=null};f[e?"download":"upload"]=!0,n(f)},t)},ai=ne.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let s;function i(r){let a=r;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return s=i(window.location.href),function(a){const o=p.isString(a)?i(a):a;return o.protocol===s.protocol&&o.host===s.host}}():function(){return function(){return!0}}(),oi=ne.hasStandardBrowserEnv?{write(n,e,t,s,i,r){const a=[n+"="+encodeURIComponent(e)];p.isNumber(t)&&a.push("expires="+new Date(t).toGMTString()),p.isString(s)&&a.push("path="+s),p.isString(i)&&a.push("domain="+i),r===!0&&a.push("secure"),document.cookie=a.join("; ")},read(n){const e=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(n){this.write(n,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ci(n){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function li(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function Tn(n,e){return n&&!ci(e)?li(n,e):e}const Wt=n=>n instanceof J?{...n}:n;function we(n,e){e=e||{};const t={};function s(h,d,f){return p.isPlainObject(h)&&p.isPlainObject(d)?p.merge.call({caseless:f},h,d):p.isPlainObject(d)?p.merge({},d):p.isArray(d)?d.slice():d}function i(h,d,f){if(p.isUndefined(d)){if(!p.isUndefined(h))return s(void 0,h,f)}else return s(h,d,f)}function r(h,d){if(!p.isUndefined(d))return s(void 0,d)}function a(h,d){if(p.isUndefined(d)){if(!p.isUndefined(h))return s(void 0,h)}else return s(void 0,d)}function o(h,d,f){if(f in e)return s(h,d);if(f in n)return s(void 0,h)}const u={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(h,d)=>i(Wt(h),Wt(d),!0)};return p.forEach(Object.keys(Object.assign({},n,e)),function(d){const f=u[d]||i,C=f(n[d],e[d],d);p.isUndefined(C)&&f!==o||(t[d]=C)}),t}const Ln=n=>{const e=we({},n);let{data:t,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:r,headers:a,auth:o}=e;e.headers=a=J.from(a),e.url=En(Tn(e.baseURL,e.url),n.params,n.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):"")));let u;if(p.isFormData(t)){if(ne.hasStandardBrowserEnv||ne.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if((u=a.getContentType())!==!1){const[h,...d]=u?u.split(";").map(f=>f.trim()).filter(Boolean):[];a.setContentType([h||"multipart/form-data",...d].join("; "))}}if(ne.hasStandardBrowserEnv&&(s&&p.isFunction(s)&&(s=s(e)),s||s!==!1&&ai(e.url))){const h=i&&r&&oi.read(r);h&&a.set(i,h)}return e},di=typeof XMLHttpRequest<"u",ui=di&&function(n){return new Promise(function(t,s){const i=Ln(n);let r=i.data;const a=J.from(i.headers).normalize();let{responseType:o}=i,u;function h(){i.cancelToken&&i.cancelToken.unsubscribe(u),i.signal&&i.signal.removeEventListener("abort",u)}let d=new XMLHttpRequest;d.open(i.method.toUpperCase(),i.url,!0),d.timeout=i.timeout;function f(){if(!d)return;const v=J.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),T={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:v,config:n,request:d};Sn(function(D){t(D),h()},function(D){s(D),h()},T),d=null}"onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(s(new R("Request aborted",R.ECONNABORTED,i,d)),d=null)},d.onerror=function(){s(new R("Network Error",R.ERR_NETWORK,i,d)),d=null},d.ontimeout=function(){let b=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const T=i.transitional||vn;i.timeoutErrorMessage&&(b=i.timeoutErrorMessage),s(new R(b,T.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,i,d)),d=null},r===void 0&&a.setContentType(null),"setRequestHeader"in d&&p.forEach(a.toJSON(),function(b,T){d.setRequestHeader(T,b)}),p.isUndefined(i.withCredentials)||(d.withCredentials=!!i.withCredentials),o&&o!=="json"&&(d.responseType=i.responseType),typeof i.onDownloadProgress=="function"&&d.addEventListener("progress",je(i.onDownloadProgress,!0)),typeof i.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",je(i.onUploadProgress)),(i.cancelToken||i.signal)&&(u=v=>{d&&(s(!v||v.type?new _e(null,n,d):v),d.abort(),d=null)},i.cancelToken&&i.cancelToken.subscribe(u),i.signal&&(i.signal.aborted?u():i.signal.addEventListener("abort",u)));const C=si(i.url);if(C&&ne.protocols.indexOf(C)===-1){s(new R("Unsupported protocol "+C+":",R.ERR_BAD_REQUEST,n));return}d.send(r||null)})},hi=(n,e)=>{let t=new AbortController,s;const i=function(u){if(!s){s=!0,a();const h=u instanceof Error?u:this.reason;t.abort(h instanceof R?h:new _e(h instanceof Error?h.message:h))}};let r=e&&setTimeout(()=>{i(new R(`timeout ${e} of ms exceeded`,R.ETIMEDOUT))},e);const a=()=>{n&&(r&&clearTimeout(r),r=null,n.forEach(u=>{u&&(u.removeEventListener?u.removeEventListener("abort",i):u.unsubscribe(i))}),n=null)};n.forEach(u=>u&&u.addEventListener&&u.addEventListener("abort",i));const{signal:o}=t;return o.unsubscribe=a,[o,()=>{r&&clearTimeout(r),r=null}]},mi=function*(n,e){let t=n.byteLength;if(!e||t<e){yield n;return}let s=0,i;for(;s<t;)i=s+e,yield n.slice(s,i),s=i},pi=async function*(n,e,t){for await(const s of n)yield*mi(ArrayBuffer.isView(s)?s:await t(String(s)),e)},Kt=(n,e,t,s,i)=>{const r=pi(n,e,i);let a=0;return new ReadableStream({type:"bytes",async pull(o){const{done:u,value:h}=await r.next();if(u){o.close(),s();return}let d=h.byteLength;t&&t(a+=d),o.enqueue(new Uint8Array(h))},cancel(o){return s(o),r.return()}},{highWaterMark:2})},Gt=(n,e)=>{const t=n!=null;return s=>setTimeout(()=>e({lengthComputable:t,total:n,loaded:s}))},et=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",In=et&&typeof ReadableStream=="function",lt=et&&(typeof TextEncoder=="function"?(n=>e=>n.encode(e))(new TextEncoder):async n=>new Uint8Array(await new Response(n).arrayBuffer())),fi=In&&(()=>{let n=!1;const e=new Request(ne.origin,{body:new ReadableStream,method:"POST",get duplex(){return n=!0,"half"}}).headers.has("Content-Type");return n&&!e})(),Jt=64*1024,dt=In&&!!(()=>{try{return p.isReadableStream(new Response("").body)}catch{}})(),ze={stream:dt&&(n=>n.body)};et&&(n=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ze[e]&&(ze[e]=p.isFunction(n[e])?t=>t[e]():(t,s)=>{throw new R(`Response type '${e}' is not supported`,R.ERR_NOT_SUPPORT,s)})})})(new Response);const yi=async n=>{if(n==null)return 0;if(p.isBlob(n))return n.size;if(p.isSpecCompliantForm(n))return(await new Request(n).arrayBuffer()).byteLength;if(p.isArrayBufferView(n))return n.byteLength;if(p.isURLSearchParams(n)&&(n=n+""),p.isString(n))return(await lt(n)).byteLength},gi=async(n,e)=>{const t=p.toFiniteNumber(n.getContentLength());return t??yi(e)},wi=et&&(async n=>{let{url:e,method:t,data:s,signal:i,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:u,responseType:h,headers:d,withCredentials:f="same-origin",fetchOptions:C}=Ln(n);h=h?(h+"").toLowerCase():"text";let[v,b]=i||r||a?hi([i,r],a):[],T,M;const D=()=>{!T&&setTimeout(()=>{v&&v.unsubscribe()}),T=!0};let H;try{if(u&&fi&&t!=="get"&&t!=="head"&&(H=await gi(d,s))!==0){let P=new Request(e,{method:"POST",body:s,duplex:"half"}),O;p.isFormData(s)&&(O=P.headers.get("content-type"))&&d.setContentType(O),P.body&&(s=Kt(P.body,Jt,Gt(H,je(u)),null,lt))}p.isString(f)||(f=f?"cors":"omit"),M=new Request(e,{...C,signal:v,method:t.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",withCredentials:f});let k=await fetch(M);const q=dt&&(h==="stream"||h==="response");if(dt&&(o||q)){const P={};["status","statusText","headers"].forEach(B=>{P[B]=k[B]});const O=p.toFiniteNumber(k.headers.get("content-length"));k=new Response(Kt(k.body,Jt,o&&Gt(O,je(o,!0)),q&&D,lt),P)}h=h||"text";let W=await ze[p.findKey(ze,h)||"text"](k,n);return!q&&D(),b&&b(),await new Promise((P,O)=>{Sn(P,O,{data:W,headers:J.from(k.headers),status:k.status,statusText:k.statusText,config:n,request:M})})}catch(k){throw D(),k&&k.name==="TypeError"&&/fetch/i.test(k.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,n,M),{cause:k.cause||k}):R.from(k,k&&k.code,n,M)}}),ut={http:qs,xhr:ui,fetch:wi};p.forEach(ut,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Yt=n=>`- ${n}`,Ei=n=>p.isFunction(n)||n===null||n===!1,An={getAdapter:n=>{n=p.isArray(n)?n:[n];const{length:e}=n;let t,s;const i={};for(let r=0;r<e;r++){t=n[r];let a;if(s=t,!Ei(t)&&(s=ut[(a=String(t)).toLowerCase()],s===void 0))throw new R(`Unknown adapter '${a}'`);if(s)break;i[a||"#"+r]=s}if(!s){const r=Object.entries(i).map(([o,u])=>`adapter ${o} `+(u===!1?"is not supported by the environment":"is not available in the build"));let a=e?r.length>1?`since :
`+r.map(Yt).join(`
`):" "+Yt(r[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return s},adapters:ut};function at(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new _e(null,n)}function Zt(n){return at(n),n.headers=J.from(n.headers),n.data=rt.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),An.getAdapter(n.adapter||Re.adapter)(n).then(function(s){return at(n),s.data=rt.call(n,n.transformResponse,s),s.headers=J.from(s.headers),s},function(s){return bn(s)||(at(n),s&&s.response&&(s.response.data=rt.call(n,n.transformResponse,s.response),s.response.headers=J.from(s.response.headers))),Promise.reject(s)})}const _n="1.7.2",Mt={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Mt[n]=function(s){return typeof s===n||"a"+(e<1?"n ":" ")+n}});const Qt={};Mt.transitional=function(e,t,s){function i(r,a){return"[Axios v"+_n+"] Transitional option '"+r+"'"+a+(s?". "+s:"")}return(r,a,o)=>{if(e===!1)throw new R(i(a," has been removed"+(t?" in "+t:"")),R.ERR_DEPRECATED);return t&&!Qt[a]&&(Qt[a]=!0,console.warn(i(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(r,a,o):!0}};function vi(n,e,t){if(typeof n!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const s=Object.keys(n);let i=s.length;for(;i-- >0;){const r=s[i],a=e[r];if(a){const o=n[r],u=o===void 0||a(o,r,n);if(u!==!0)throw new R("option "+r+" must be "+u,R.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new R("Unknown option "+r,R.ERR_BAD_OPTION)}}const ht={assertOptions:vi,validators:Mt},le=ht.validators;let ge=class{constructor(e){this.defaults=e,this.interceptors={request:new zt,response:new zt}}async request(e,t){try{return await this._request(e,t)}catch(s){if(s instanceof Error){let i;Error.captureStackTrace?Error.captureStackTrace(i={}):i=new Error;const r=i.stack?i.stack.replace(/^.+\n/,""):"";try{s.stack?r&&!String(s.stack).endsWith(r.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+r):s.stack=r}catch{}}throw s}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=we(this.defaults,t);const{transitional:s,paramsSerializer:i,headers:r}=t;s!==void 0&&ht.assertOptions(s,{silentJSONParsing:le.transitional(le.boolean),forcedJSONParsing:le.transitional(le.boolean),clarifyTimeoutError:le.transitional(le.boolean)},!1),i!=null&&(p.isFunction(i)?t.paramsSerializer={serialize:i}:ht.assertOptions(i,{encode:le.function,serialize:le.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=r&&p.merge(r.common,r[t.method]);r&&p.forEach(["delete","get","head","post","put","patch","common"],b=>{delete r[b]}),t.headers=J.concat(a,r);const o=[];let u=!0;this.interceptors.request.forEach(function(T){typeof T.runWhen=="function"&&T.runWhen(t)===!1||(u=u&&T.synchronous,o.unshift(T.fulfilled,T.rejected))});const h=[];this.interceptors.response.forEach(function(T){h.push(T.fulfilled,T.rejected)});let d,f=0,C;if(!u){const b=[Zt.bind(this),void 0];for(b.unshift.apply(b,o),b.push.apply(b,h),C=b.length,d=Promise.resolve(t);f<C;)d=d.then(b[f++],b[f++]);return d}C=o.length;let v=t;for(f=0;f<C;){const b=o[f++],T=o[f++];try{v=b(v)}catch(M){T.call(this,M);break}}try{d=Zt.call(this,v)}catch(b){return Promise.reject(b)}for(f=0,C=h.length;f<C;)d=d.then(h[f++],h[f++]);return d}getUri(e){e=we(this.defaults,e);const t=Tn(e.baseURL,e.url);return En(t,e.params,e.paramsSerializer)}};p.forEach(["delete","get","head","options"],function(e){ge.prototype[e]=function(t,s){return this.request(we(s||{},{method:e,url:t,data:(s||{}).data}))}});p.forEach(["post","put","patch"],function(e){function t(s){return function(r,a,o){return this.request(we(o||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:r,data:a}))}}ge.prototype[e]=t(),ge.prototype[e+"Form"]=t(!0)});let Ci=class xn{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(r){t=r});const s=this;this.promise.then(i=>{if(!s._listeners)return;let r=s._listeners.length;for(;r-- >0;)s._listeners[r](i);s._listeners=null}),this.promise.then=i=>{let r;const a=new Promise(o=>{s.subscribe(o),r=o}).then(i);return a.cancel=function(){s.unsubscribe(r)},a},e(function(r,a,o){s.reason||(s.reason=new _e(r,a,o),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}static source(){let e;return{token:new xn(function(i){e=i}),cancel:e}}};function bi(n){return function(t){return n.apply(null,t)}}function Si(n){return p.isObject(n)&&n.isAxiosError===!0}const mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mt).forEach(([n,e])=>{mt[e]=n});function Nn(n){const e=new ge(n),t=on(ge.prototype.request,e);return p.extend(t,ge.prototype,e,{allOwnKeys:!0}),p.extend(t,e,null,{allOwnKeys:!0}),t.create=function(i){return Nn(we(n,i))},t}const S=Nn(Re);S.Axios=ge;S.CanceledError=_e;S.CancelToken=Ci;S.isCancel=bn;S.VERSION=_n;S.toFormData=Xe;S.AxiosError=R;S.Cancel=S.CanceledError;S.all=function(e){return Promise.all(e)};S.spread=bi;S.isAxiosError=Si;S.mergeConfig=we;S.AxiosHeaders=J;S.formToJSON=n=>Cn(p.isHTMLForm(n)?new FormData(n):n);S.getAdapter=An.getAdapter;S.HttpStatusCode=mt;S.default=S;const{Axios:Jr,AxiosError:Xt,CanceledError:Yr,isCancel:Zr,CancelToken:Qr,VERSION:Xr,all:ea,Cancel:ta,isAxiosError:na,spread:sa,toFormData:ia,AxiosHeaders:ra,HttpStatusCode:Oe,formToJSON:aa,getAdapter:oa,mergeConfig:ca}=S;var Mn={exports:{}};/*!
 * Toastify js 1.12.0
 * https://github.com/apvarun/toastify-js
 * @license MIT licensed
 *
 * Copyright (C) 2018 Varun A P
 */(function(n){(function(e,t){n.exports?n.exports=t():e.Toastify=t()})(Jn,function(e){var t=function(a){return new t.lib.init(a)},s="1.12.0";t.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},t.lib=t.prototype={toastify:s,constructor:t,init:function(a){return a||(a={}),this.options={},this.toastElement=null,this.options.text=a.text||t.defaults.text,this.options.node=a.node||t.defaults.node,this.options.duration=a.duration===0?0:a.duration||t.defaults.duration,this.options.selector=a.selector||t.defaults.selector,this.options.callback=a.callback||t.defaults.callback,this.options.destination=a.destination||t.defaults.destination,this.options.newWindow=a.newWindow||t.defaults.newWindow,this.options.close=a.close||t.defaults.close,this.options.gravity=a.gravity==="bottom"?"toastify-bottom":t.defaults.gravity,this.options.positionLeft=a.positionLeft||t.defaults.positionLeft,this.options.position=a.position||t.defaults.position,this.options.backgroundColor=a.backgroundColor||t.defaults.backgroundColor,this.options.avatar=a.avatar||t.defaults.avatar,this.options.className=a.className||t.defaults.className,this.options.stopOnFocus=a.stopOnFocus===void 0?t.defaults.stopOnFocus:a.stopOnFocus,this.options.onClick=a.onClick||t.defaults.onClick,this.options.offset=a.offset||t.defaults.offset,this.options.escapeMarkup=a.escapeMarkup!==void 0?a.escapeMarkup:t.defaults.escapeMarkup,this.options.ariaLive=a.ariaLive||t.defaults.ariaLive,this.options.style=a.style||t.defaults.style,a.backgroundColor&&(this.options.style.background=a.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var a=document.createElement("div");a.className="toastify on "+this.options.className,this.options.position?a.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(a.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):a.className+=" toastify-right",a.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var o in this.options.style)a.style[o]=this.options.style[o];if(this.options.ariaLive&&a.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)a.appendChild(this.options.node);else if(this.options.escapeMarkup?a.innerText=this.options.text:a.innerHTML=this.options.text,this.options.avatar!==""){var u=document.createElement("img");u.src=this.options.avatar,u.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?a.appendChild(u):a.insertAdjacentElement("afterbegin",u)}if(this.options.close===!0){var h=document.createElement("button");h.type="button",h.setAttribute("aria-label","Close"),h.className="toast-close",h.innerHTML="&#10006;",h.addEventListener("click",(function(M){M.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var d=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&d>360?a.insertAdjacentElement("afterbegin",h):a.appendChild(h)}if(this.options.stopOnFocus&&this.options.duration>0){var f=this;a.addEventListener("mouseover",function(M){window.clearTimeout(a.timeOutValue)}),a.addEventListener("mouseleave",function(){a.timeOutValue=window.setTimeout(function(){f.removeElement(a)},f.options.duration)})}if(typeof this.options.destination<"u"&&a.addEventListener("click",(function(M){M.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&a.addEventListener("click",(function(M){M.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var C=i("x",this.options),v=i("y",this.options),b=this.options.position=="left"?C:"-"+C,T=this.options.gravity=="toastify-top"?v:"-"+v;a.style.transform="translate("+b+","+T+")"}return a},showToast:function(){this.toastElement=this.buildToast();var a;if(typeof this.options.selector=="string"?a=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?a=this.options.selector:a=document.body,!a)throw"Root element is not defined";var o=t.defaults.oldestFirst?a.firstChild:a.lastChild;return a.insertBefore(this.toastElement,o),t.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(a){a.className=a.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),a.parentNode&&a.parentNode.removeChild(a),this.options.callback.call(a),t.reposition()}).bind(this),400)}},t.reposition=function(){for(var a={top:15,bottom:15},o={top:15,bottom:15},u={top:15,bottom:15},h=document.getElementsByClassName("toastify"),d,f=0;f<h.length;f++){r(h[f],"toastify-top")===!0?d="toastify-top":d="toastify-bottom";var C=h[f].offsetHeight;d=d.substr(9,d.length-1);var v=15,b=window.innerWidth>0?window.innerWidth:screen.width;b<=360?(h[f].style[d]=u[d]+"px",u[d]+=C+v):r(h[f],"toastify-left")===!0?(h[f].style[d]=a[d]+"px",a[d]+=C+v):(h[f].style[d]=o[d]+"px",o[d]+=C+v)}return this};function i(a,o){return o.offset[a]?isNaN(o.offset[a])?o.offset[a]:o.offset[a]+"px":"0px"}function r(a,o){return!a||typeof o!="string"?!1:!!(a.className&&a.className.trim().split(/\s+/gi).indexOf(o)>-1)}return t.lib.init.prototype=t.lib,t})})(Mn);var Ti=Mn.exports;const Li=sn(Ti);class A{static show(e){return Li({text:e,duration:this.durationMS,newWindow:!0,close:!0,gravity:"bottom",stopOnFocus:!0,style:this.style}).showToast()}}y(A,"style",{position:"fixed",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"1rem",padding:"1rem 2rem",background:"var(--brown)",borderRadius:"1rem",bottom:"5vh",right:"2vw",zIndex:"10",color:"white",minWidth:"14rem"}),y(A,"durationMS",5e3);const x="https://modest-trusted-moose.ngrok-free.app",Ii="/carts",Ai=`${Ii}/clear`,Dn=async()=>await S.delete(`${x}${Ai}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),_i="/carts",Dt="/cart-items",xi=`${Dt}/add`,Ni=`${Dt}/delete`,Mi=`${Dt}/edit`,Di=async n=>await S.delete(`${x}${Ni}`,{params:{menuItemId:n},headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),Ri=async(n,e)=>await S.patch(`${x}${Mi}`,{quantity:e.quantity},{params:{menuItemId:n},headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),en=async n=>await S.post(`${x}${xi}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),ki=async()=>await S.get(`${x}${_i}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),qi="/login",Oi="/login/admin",Pi="/refresh",$i=async n=>await S.post(`${x}${qi}`,n,{withCredentials:!0}).then(e=>e.data),Hi=async n=>await S.post(`${x}${Oi}`,n,{withCredentials:!0}).then(e=>e.data),Bi=async()=>await S.post(`${x}${Pi}`,{},{withCredentials:!0}).then(n=>n.data).catch(n=>n.response.data),Ui="/upload-url/",Ve=async()=>await S.get(`${x}${Ui}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),We=async(n,e)=>await S.put(`${n}`,e,{headers:{"Content-Type":e.type}}).then(t=>t.data);async function N(n,...e){var t,s,i;try{return await n(...e)}catch(r){if(S.isAxiosError(r))if(((t=r.response)==null?void 0:t.data.message)==="Token Expired"){const a=await Fi();if(!a.accessToken)throw ji(),new Error(`Failed to refresh access token: ${a}`);w.updateState("accessToken",a.accessToken);try{return await n(...e)}catch(o){throw S.isAxiosError(o)?(console.error("API Error:",o.response.status,o.response.statusText),new Xt((s=o.response)==null?void 0:s.data.message)):new Error(`API Error: ${o}`)}}else throw console.error("API Error:",r),new Xt((i=r.response)==null?void 0:i.data.message);else throw console.error("Unexpected error:",r),new Error(`Unexpected Error: ${r}`)}}async function Fi(){try{return await Bi()}catch(n){throw S.isAxiosError(n)?(console.error("Error fetching access token:",n.response.status,n.response.statusText),new Error("Error fetching access token")):(console.error("Error fetching access token:",n),new Error("Error fetching access token"))}}function ji(){w.resetState(),console.warn("User logged out due to token expiration")}class zi{constructor(e){y(this,"url");y(this,"element");y(this,"cartItemData");y(this,"incrementButton");y(this,"decrementButton");y(this,"deleteButton");this.url="/assets/templates/components/cart-item.html",this.element=document.createElement("div"),this.cartItemData=e,this.incrementButton={},this.decrementButton={},this.deleteButton={},this.init()}init(){this.element&&fetch(this.url).then(e=>e.text()).then(e=>{this.element.classList.add("cart-item"),this.element.innerHTML=e,this.render(),this.setupEventListeners()})}render(){const e=this.element.querySelector(".cart-item__image");e.src=this.cartItemData.menuItemData.imageSrc,e.alt=`An image of ${this.cartItemData.menuItemData.name}`;const t=this.element.querySelector("#cart-item-title");t.innerHTML=this.cartItemData.menuItemData.name;const s=this.element.querySelector("#cart-item-unit-price");s.innerHTML=`Rs. ${this.cartItemData.menuItemData.price}`;const i=this.element.querySelector("#cart-item-total-price");i.innerHTML=`Rs. ${this.cartItemData.menuItemData.price*this.cartItemData.quantity}`,this.decrementButton=this.element.querySelector(".cart-item__quantity-semi-rounded-left"),this.decrementButton.disabled=this.cartItemData.quantity===1,this.incrementButton=this.element.querySelector(".cart-item__quantity-semi-rounded-right"),this.deleteButton=this.element.querySelector(".cart-item__trash-button");const r=this.element.querySelector(".cart-item__quantity-small-rounded-box");r.innerText=`${this.cartItemData.quantity}`}setupEventListeners(){var e,t,s;(e=this.decrementButton)==null||e.addEventListener("click",()=>this.decrementQuantity()),(t=this.incrementButton)==null||t.addEventListener("click",()=>this.incrementQuantity()),(s=this.deleteButton)==null||s.addEventListener("click",()=>this.deleteItem())}decrementQuantity(){const e=this.element.querySelector(".cart-item__quantity-small-rounded-box");let t=parseInt(e.innerText);t>1&&(t--,e.innerText=`${t}`,this.updateTotalPrice(t)),t===1&&(this.decrementButton.disabled=!0)}incrementQuantity(){const e=this.element.querySelector(".cart-item__quantity-small-rounded-box");let t=parseInt(e.innerText);t++,e.innerText=`${t}`,this.decrementButton.disabled=!1,this.updateTotalPrice(t)}async updateTotalPrice(e){const t=this.element.querySelector(".cart-item__unit-price"),s=this.element.querySelector(".cart-item__total-price"),r=parseFloat(t.innerText.replace("Rs. ",""))*e;this.cartItemData.quantity=e,s.innerText=`Rs. ${r}`;const a=w.state.cart.find(o=>o.menuItemData.id===this.cartItemData.menuItemData.id);if(a.quantity=e,w.updateState("cart",w.state.cart),z.updatePrices(),z.render(),w.state.user)try{await N(Ri,this.cartItemData.menuItemData.id,{quantity:e})}catch(o){console.error("Error updating cart:",o)}}async deleteItem(){await z.removeItem(this.cartItemData.menuItemData),z.updatePrices(),z.render()}}class z{static init(){return this.element.classList.add("cart"),this.loadHtmlTemplate().then(e=>{this.html=e,this.element.innerHTML="",w.state.user?this.fetchCartItems():this.render()}),this.element}static get innerElements(){return{checkoutButton:this.element.querySelector("#checkout-button"),cartContainer:this.element.querySelector(".cart__container"),totalAmountDisplay:this.element.querySelector("#total-amount"),subTotalAmountDisplay:this.element.querySelector("#sub-total-amount"),discountAmountDisplay:this.element.querySelector("#discount-amount"),emptyCartImageWrapper:this.element.querySelector(".cart__image-wrapper")}}static async loadHtmlTemplate(){try{return await(await fetch(this.htmlTemplateUrl)).text()}catch(e){return console.error("Failed to load HTML template",e),"<h3>Failed to load the cart template.</h3>"}}static setEventListeners(){if(!w.state.user||!w.state.cart.length){this.innerElements.checkoutButton.disabled=!0;return}this.innerElements.checkoutButton.disabled=!1,this.innerElements.checkoutButton.addEventListener("click",()=>{history.pushState(null,"","/checkout"),Z("/checkout")})}static async fetchCartItems(){this.element.appendChild(this.spinner);try{w.state.cart.length&&(await N(Dn),await N(en,w.state.cart.map(t=>({quantity:t.quantity,menuItemId:t.menuItemData.id}))),w.updateState("cart",[]));const e=await N(ki);w.updateState("cart",e.map(t=>({quantity:t.quantity,menuItemData:t.menuItemData}))),this.render()}catch(e){this.element.innerHTML=`<h3>${e}</h3>`}finally{this.spinner.remove()}}static render(){if(this.element.innerHTML=this.html,this.setEventListeners(),this.updatePrices(),!w.state.user||!w.state.cart.length?this.innerElements.checkoutButton.disabled=!0:this.innerElements.checkoutButton.disabled=!1,!w.state.cart.length){this.innerElements.emptyCartImageWrapper.style.display="flex";return}this.innerElements.emptyCartImageWrapper.style.display="none",this.cartItemArray=[],w.state.cart.forEach(e=>{const t=new zi(e);this.cartItemArray.push(t)}),this.innerElements.cartContainer.innerHTML="",this.cartItemArray.forEach(e=>{this.innerElements.cartContainer.appendChild(e.element)}),this.updatePriceDisplay()}static async addItem(e){if(w.updateState("cart",[...w.state.cart,{quantity:1,menuItemData:e}]),this.updatePrices(),w.state.user)try{await N(en,[{quantity:1,menuItemId:e.id}])}catch{w.updateState("cart",w.state.cart.filter(s=>s.menuItemData.id!==e.id)),this.updatePrices()}}static async removeItem(e){if(w.state.user)try{await N(Di,e.id)}catch{w.updateState("cart",[...w.state.cart,{quantity:1,menuItemData:e}]),this.updatePrices()}w.updateState("cart",w.state.cart.filter(t=>t.menuItemData.id!==e.id)),this.updatePrices()}static updatePrices(){this.subTotalAmount=w.state.cart.reduce((e,t)=>e+t.quantity*t.menuItemData.price,0),this.discountAmount=0,this.totalAmount=this.subTotalAmount-this.discountAmount}static updatePriceDisplay(){this.innerElements.subTotalAmountDisplay.innerHTML=`Rs. ${this.subTotalAmount}`,this.innerElements.totalAmountDisplay.innerHTML=`Rs. ${this.totalAmount}`,this.innerElements.discountAmountDisplay.innerHTML=`Rs. ${this.discountAmount}`}}y(z,"htmlTemplateUrl","/assets/templates/pages/cart/cart.html"),y(z,"element",document.createElement("section")),y(z,"totalAmount",0),y(z,"discountAmount",0),y(z,"subTotalAmount",0),y(z,"spinner",V.render(50)),y(z,"html",""),y(z,"cartItemArray",[]);const Ie="/users",Vi="/users/all",Wi=async n=>await S.get(`${x}${Vi}`,{headers:{Authorization:`Bearer ${n}`}}).then(e=>e.data),Ke=async n=>{const e=n?`${x}${Ie}/?userId=${n}`:`${x}${Ie}`;return await S.get(e,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data)},Ki=async n=>await S.post(`${x}${Ie}`,n).then(e=>e.data),Gi=async(n,e)=>await S.patch(`${x}${Ie}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{userId:e}}).then(t=>t.data),Ji=async()=>await S.delete(`${x}${Ie}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),Yi=async(n,e)=>await S.delete(`${x}${Ie}`,{headers:{Authorization:`Bearer ${e}`},params:{userId:n}}).then(t=>t.data);class pt{static init(){return this.element&&fetch(this.htmlTemplateURL).then(e=>e.text()).then(e=>{this.element.classList.add("auth-card"),this.element.innerHTML=e,this.setupEventListeners()}),this.element}static setupEventListeners(){const e=document.getElementById("signup"),t=document.getElementById("signin"),s=document.getElementById("auth-card-cross-button-right"),i=document.getElementById("auth-card-cross-button-left"),r=document.getElementsByName("toggle-password"),a=document.querySelector(".auth-card__active-box"),o=this.element.querySelector(".auth-card__form--signin"),u=this.element.querySelector(".auth-card__form--signup"),h=this.element.querySelector("#login-email"),d=this.element.querySelector("#login-password"),f=this.element.querySelector("#register-fullname"),C=this.element.querySelector("#register-email"),v=this.element.querySelector("#register-password"),b=this.element.querySelector("#register-confirm-password"),T=this.element.querySelector("#register-phone"),M=this.element.querySelector("#login-email-validate-error"),D=this.element.querySelector("#login-password-validate-error"),H=this.element.querySelector("#login-response-message"),k=this.element.querySelector("#register-fullname-validate-error"),q=this.element.querySelector("#register-email-validate-error"),W=this.element.querySelector("#register-password-validate-error"),P=this.element.querySelector("#register-confirm-password-validate-error"),O=this.element.querySelector("#register-phone-validate-error"),B=this.element.querySelector("#register-response-message"),ae=this.element.querySelector("#login-button"),me=this.element.querySelector("#register-button");e&&t&&a&&o&&u&&i&&s&&r&&(e.addEventListener("click",()=>{a.style.transform="translateX(80%)",o.classList.add("auth-card__form--hidden"),u.classList.remove("auth-card__form--hidden"),i.style.visibility="visible",s.style.visibility="hidden"}),t.addEventListener("click",()=>{a.style.transform="translateX(0%)",u.classList.add("auth-card__form--hidden"),o.classList.remove("auth-card__form--hidden"),i.style.visibility="hidden",s.style.visibility="visible"}),i.addEventListener("click",()=>Q.toggle()),s.addEventListener("click",()=>Q.toggle()),r.forEach(pe=>{pe.addEventListener("click",()=>this.togglePasswordVisibility())}));const _=document.querySelector("#register-phone");an(_,{initialCountry:"np",onlyCountries:["np"],utilsScript:"'node_modules/intl-tel-input/build/js/utils.js'"}),u.addEventListener("submit",async pe=>{pe.preventDefault(),this.clearError(k),this.clearError(q),this.clearError(W),this.clearError(P),this.clearError(O),this.clearError(B);let c=!0;if(this.validateFullName(f.value)||(this.showError(k,"Please enter a valid name."),c=!1),this.validateEmail(C.value)||(this.showError(q,"Please enter a valid email."),c=!1),this.validatePassword(v.value)||(this.showError(W,"Must be 4 char long, 1 ucase and 1 special character"),c=!1),this.validateConfirmPassword(v.value,b.value)||(this.showError(P,"Must be same as the password"),c=!1),this.validatePhoneNumber(T.value)||(this.showError(O,"Please enter a valid phone number."),c=!1),c){const l={name:f.value,email:C.value,password:v.value,phoneNumber:T.value},m=await this.register(me,l);m.status!=Oe.Accepted&&this.showError(B,m.message)}}),o.addEventListener("submit",async pe=>{pe.preventDefault(),this.clearError(M),this.clearError(D),this.clearError(B);let c=!0;const l=ae.querySelector(".loading-spinner");if(l&&l.remove(),this.validateEmail(h.value)||(this.showError(M,"Please enter a valid email."),c=!1),this.validatePassword(d.value)||(this.showError(D,"Must be at least 4 characters long."),c=!1),c){const m={email:h.value,password:d.value},g=await this.login(ae,m);if(!g.response){this.showError(H,"Network Error");return}g.response.status!=Oe.Accepted&&(g.response.status==Oe.Unauthorized?this.showError(H,"Invalid Credentials"):g.response.status==Oe.Forbidden?this.showError(H,"Admin is not allowed"):this.showError(H,g.message))}})}static togglePasswordVisibility(){const e=document.getElementsByName("toggle-password"),t=document.getElementsByName("password-field");if(!e.length||!t.length)return;const s=e[0].classList.contains("fa-eye-slash")?"password":"text";t.forEach(i=>{i.setAttribute("type",s)}),s==="password"?e.forEach(i=>{i.classList.remove("fa-eye-slash"),i.classList.add("fa-eye")}):e.forEach(i=>{i.classList.remove("fa-eye"),i.classList.add("fa-eye-slash")})}static validateEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}static validatePassword(e){return/^(?=.*[A-Z])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{4,}$/.test(e)}static validateFullName(e){return/^[a-zA-Z ]{4,}$/.test(e)}static validateConfirmPassword(e,t){return t==e}static validatePhoneNumber(e){return/^\+?\d{10,14}$/.test(e)}static showError(e,t){e.textContent=t}static clearError(e){e.textContent=""}static async login(e,t){const s=V.render(20);return e.innerText="Logging In",e.classList.add("auth-card__button--loading"),e.appendChild(s),e.disabled=!0,await $i(t).then(i=>(Q.toggle(),w.updateState("accessToken",i.accessToken),w.updateState("user",i.user),A.show("User Logged In"),z.fetchCartItems(),history.pushState(null,"","/"),Z("/"),i)).catch(i=>i).finally(()=>{e.disabled=!1,e.innerText="Login",s.remove(),e.classList.remove("auth-card__button--loading")})}static async register(e,t){const s=V.render(20);return e.innerText="Signing Up",e.classList.add("auth-card__button--loading"),e.appendChild(s),e.disabled=!0,await Ki(t).then(i=>(Q.toggle(),A.show("User Signed Up"),i)).catch(i=>i).finally(()=>{e.disabled=!1,e.innerText="Register",s.remove(),e.classList.remove("auth-card__button--loading")})}}y(pt,"element",document.createElement("div")),y(pt,"htmlTemplateURL","/assets/templates/components/auth-card.html");var ke=(n=>(n.SUPERADMIN="1",n.CUSTOMER="2",n.CUSTOMER_WITH_RESTAURANT="3",n))(ke||{});const Rn="/restaurants",Zi="/restaurants/create",kn=async n=>await S.get(`${x}${Rn}/${n}`).then(e=>e.data),Qi=async()=>await S.get(`${x}${Rn}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),Xi=async n=>await S.post(`${x}${Zi}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data);class ft{static init(e){return this.element&&fetch(this.htmlTemplateURL).then(t=>t.text()).then(async t=>{this.element.classList.add("modal-form"),this.element.innerHTML=t,this.innerElements(),this.setupEventListeners(),this.render(e)}),this.element}static render(e){e==="create"?(this.innerElements().submitButton.innerHTML="Register",this.innerElements().formHeading.innerHTML="Register Restaurant"):(this.innerElements().submitButton.innerHTML="Edit",this.innerElements().formHeading.innerHTML="Edit Restaurant")}static innerElements(){return{formHeading:this.element.querySelector(".modal-form__heading"),registrationForm:this.element.querySelector("#restaurant-form"),restaurantName:this.element.querySelector("#restaurant-name"),location:this.element.querySelector("#location"),contactNumber:this.element.querySelector("#contact-number"),openingTime:this.element.querySelector("#opening-time"),closingTime:this.element.querySelector("#closing-time"),panNumber:this.element.querySelector("#pan-number"),profilePic:this.element.querySelector("#profile-image"),coverPic:this.element.querySelector("#cover-image"),description:this.element.querySelector("#description"),submitButton:this.element.querySelector("#form-submit-button"),crossButton:this.element.querySelector("#modal-cross-button"),errorMessage:this.element.querySelector(".form__error-message")}}static setupEventListeners(){this.innerElements().crossButton.addEventListener("click",()=>Q.toggle()),this.innerElements().registrationForm.addEventListener("submit",async e=>{if(e.preventDefault(),!this.innerElements().registrationForm.checkValidity()){this.innerElements().registrationForm.reportValidity();return}this.submitFormRegistration()})}static async submitFormRegistration(){const e=await N(Ve);await N(We,e.url.url,this.innerElements().profilePic.files[0]);const t=await N(Ve);await N(We,t.url.url,this.innerElements().coverPic.files[0]);const s=`${this.innerElements().openingTime.value} - ${this.innerElements().closingTime.value}`,i={name:this.innerElements().restaurantName.value,location:this.innerElements().location.value,contactNumber:this.innerElements().contactNumber.value,openHours:s,panNumber:this.innerElements().panNumber.value,profilePic:e.url.fileName,coverPic:t.url.fileName,description:this.innerElements().description.value},r=V.render(20);try{this.innerElements().submitButton.append(r),this.innerElements().submitButton.disabled=!0;const a=await N(Xi,i);w.updateState("user",{...w.state.user,roleId:ke.CUSTOMER_WITH_RESTAURANT,restaurantId:a.created.id}),A.show("Restaurant Registration Successful"),Q.toggle()}catch(a){S.isAxiosError(a)?(this.innerElements().errorMessage.innerHTML=a.message,A.show("Restaurant Registration Failed")):(this.innerElements().errorMessage.innerHTML="An unexpected error occurred",A.show("An unexpected error occurred"))}finally{r.remove(),this.innerElements().submitButton.disabled=!1}}static isValidImage(e){return["image/jpeg","image/png","image/gif"].includes(e.type)}}y(ft,"htmlTemplateURL","/assets/templates/components/restaurant-form.html"),y(ft,"element",document.createElement("div"));class Ge{static init(){return fetch(this.htmlTemplateURL).then(e=>e.text()).then(e=>{this.element.innerHTML=e,this.initializeComponents()}),this.element}static initializeComponents(){this.checkForAuthenticatedUser(),this.setNavigationLinks(),this.setupEventListeners(),this.updateCartCount()}static get innerElements(){return{authButton:this.element.querySelector("#authentication"),authenticatedUserElement:this.element.querySelector("#authenticated-user"),authenticatedUserName:this.element.querySelector(".navbar__authenticated-user-name"),registerRestaurant:this.element.querySelector("#user-register-restaurant-link"),restaurantProfile:this.element.querySelector("#user-restaurant-profile-link"),dashboardLink:this.element.querySelector("#user-dashboard-link"),cartCountCircleDiv:this.element.querySelector("#cart-count-circle"),logoutLink:this.element.querySelector("#user-logout"),modal:document.querySelector(".modal"),homeNav:this.element.querySelector("#home-nav"),menuNav:this.element.querySelector("#menu-nav"),cartNav:this.element.querySelector("#cart-nav")}}static checkForAuthenticatedUser(){if(!w.state.user)return;const{authButton:e,authenticatedUserElement:t,authenticatedUserName:s}=this.innerElements;e.style.display="none",t.style.display="inline-block",s.innerText=w.state.user.name}static setupEventListeners(){const{authButton:e,dashboardLink:t,restaurantProfile:s,registerRestaurant:i,logoutLink:r}=this.innerElements;this.setupNavLinkListeners(),e.addEventListener("click",()=>this.showAuthModal()),t.addEventListener("click",()=>this.navigateTo("/dashboard")),s.addEventListener("click",()=>this.navigateTo("/restaurant/dashboard")),i.addEventListener("click",()=>this.showRestaurantForm()),r.addEventListener("click",()=>this.logout()),this.updateRoleBasedElementsVisibility()}static setupNavLinkListeners(){const e=document.querySelectorAll(".navbar__link");e.forEach(t=>{t.addEventListener("click",s=>{s.preventDefault();const i=t.getAttribute("href");this.navigateTo(i),this.setActiveNavLink(t,e)})})}static navigateTo(e){e&&(history.pushState(null,"",e),Z(e),window.scrollTo(0,0))}static setActiveNavLink(e,t){t.forEach(s=>s.classList.remove("active")),e.classList.add("active")}static showAuthModal(){Q.toggle(),this.innerElements.modal.appendChild(pt.init())}static showRestaurantForm(){Q.toggle();const e=document.querySelector(".modal");e.innerHTML="",e.appendChild(ft.init("create"))}static async updateRoleBasedElementsVisibility(){if(!w.state.user)return;const{registerRestaurant:e,restaurantProfile:t}=this.innerElements;w.state.user.roleId!=ke.CUSTOMER_WITH_RESTAURANT?t.style.display="none":e.style.display="none"}static logout(){w.resetState(),history.pushState(null,"","/"),Z("/"),A.show("User Logged Out")}static setNavigationLinks(){const{homeNav:e,menuNav:t,cartNav:s}=this.innerElements;e.href="/",t.href="/menu",s.href="/cart"}static updateCartCount(){const{cartCountCircleDiv:e}=this.innerElements,t=w.state.cart.length;if(t===0){e.style.display="none";return}e.style.display="flex",e.querySelector("#cart-count").textContent=t.toString()}}y(Ge,"htmlTemplateURL","/assets/templates/app-section/header.html"),y(Ge,"element",document.createElement("header"));const Y=class Y{static updateState(e,t){Y.state[e]=t,Y.saveStateToSessionStorage(),Y.renderApp()}static resetState(){Y.state=Y.getInitialState(),Y.saveStateToSessionStorage(),Y.renderApp()}static renderApp(){Ge.init()}static saveStateToSessionStorage(){sessionStorage.setItem("appState",JSON.stringify(Y.state))}static loadStateFromSessionStorage(){const e=sessionStorage.getItem("appState");if(e)try{return JSON.parse(e)}catch(t){console.error("Failed to load state from sessionStorage:",t)}return Y.getInitialState()}static getInitialState(){return{accessToken:null,user:null,cart:[]}}};y(Y,"state",Y.loadStateFromSessionStorage());let w=Y;function er(n){for(var e=[],t=0;t<n.length;){var s=n[t];if(s==="*"||s==="+"||s==="?"){e.push({type:"MODIFIER",index:t,value:n[t++]});continue}if(s==="\\"){e.push({type:"ESCAPED_CHAR",index:t++,value:n[t++]});continue}if(s==="{"){e.push({type:"OPEN",index:t,value:n[t++]});continue}if(s==="}"){e.push({type:"CLOSE",index:t,value:n[t++]});continue}if(s===":"){for(var i="",r=t+1;r<n.length;){var a=n.charCodeAt(r);if(a>=48&&a<=57||a>=65&&a<=90||a>=97&&a<=122||a===95){i+=n[r++];continue}break}if(!i)throw new TypeError("Missing parameter name at ".concat(t));e.push({type:"NAME",index:t,value:i}),t=r;continue}if(s==="("){var o=1,u="",r=t+1;if(n[r]==="?")throw new TypeError('Pattern cannot start with "?" at '.concat(r));for(;r<n.length;){if(n[r]==="\\"){u+=n[r++]+n[r++];continue}if(n[r]===")"){if(o--,o===0){r++;break}}else if(n[r]==="("&&(o++,n[r+1]!=="?"))throw new TypeError("Capturing groups are not allowed at ".concat(r));u+=n[r++]}if(o)throw new TypeError("Unbalanced pattern at ".concat(t));if(!u)throw new TypeError("Missing pattern at ".concat(t));e.push({type:"PATTERN",index:t,value:u}),t=r;continue}e.push({type:"CHAR",index:t,value:n[t++]})}return e.push({type:"END",index:t,value:""}),e}function tr(n,e){e===void 0&&(e={});for(var t=er(n),s=e.prefixes,i=s===void 0?"./":s,r="[^".concat(Ce(e.delimiter||"/#?"),"]+?"),a=[],o=0,u=0,h="",d=function(P){if(u<t.length&&t[u].type===P)return t[u++].value},f=function(P){var O=d(P);if(O!==void 0)return O;var B=t[u],ae=B.type,me=B.index;throw new TypeError("Unexpected ".concat(ae," at ").concat(me,", expected ").concat(P))},C=function(){for(var P="",O;O=d("CHAR")||d("ESCAPED_CHAR");)P+=O;return P};u<t.length;){var v=d("CHAR"),b=d("NAME"),T=d("PATTERN");if(b||T){var M=v||"";i.indexOf(M)===-1&&(h+=M,M=""),h&&(a.push(h),h=""),a.push({name:b||o++,prefix:M,suffix:"",pattern:T||r,modifier:d("MODIFIER")||""});continue}var D=v||d("ESCAPED_CHAR");if(D){h+=D;continue}h&&(a.push(h),h="");var H=d("OPEN");if(H){var M=C(),k=d("NAME")||"",q=d("PATTERN")||"",W=C();f("CLOSE"),a.push({name:k||(q?o++:""),pattern:k&&!q?r:q,prefix:M,suffix:W,modifier:d("MODIFIER")||""});continue}f("END")}return a}function nr(n,e){var t=[],s=On(n,t,e);return sr(s,t,e)}function sr(n,e,t){t===void 0&&(t={});var s=t.decode,i=s===void 0?function(r){return r}:s;return function(r){var a=n.exec(r);if(!a)return!1;for(var o=a[0],u=a.index,h=Object.create(null),d=function(C){if(a[C]===void 0)return"continue";var v=e[C-1];v.modifier==="*"||v.modifier==="+"?h[v.name]=a[C].split(v.prefix+v.suffix).map(function(b){return i(b,v)}):h[v.name]=i(a[C],v)},f=1;f<a.length;f++)d(f);return{path:o,index:u,params:h}}}function Ce(n){return n.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function qn(n){return n&&n.sensitive?"":"i"}function ir(n,e){if(!e)return n;for(var t=/\((?:\?<(.*?)>)?(?!\?)/g,s=0,i=t.exec(n.source);i;)e.push({name:i[1]||s++,prefix:"",suffix:"",modifier:"",pattern:""}),i=t.exec(n.source);return n}function rr(n,e,t){var s=n.map(function(i){return On(i,e,t).source});return new RegExp("(?:".concat(s.join("|"),")"),qn(t))}function ar(n,e,t){return or(tr(n,t),e,t)}function or(n,e,t){t===void 0&&(t={});for(var s=t.strict,i=s===void 0?!1:s,r=t.start,a=r===void 0?!0:r,o=t.end,u=o===void 0?!0:o,h=t.encode,d=h===void 0?function(me){return me}:h,f=t.delimiter,C=f===void 0?"/#?":f,v=t.endsWith,b=v===void 0?"":v,T="[".concat(Ce(b),"]|$"),M="[".concat(Ce(C),"]"),D=a?"^":"",H=0,k=n;H<k.length;H++){var q=k[H];if(typeof q=="string")D+=Ce(d(q));else{var W=Ce(d(q.prefix)),P=Ce(d(q.suffix));if(q.pattern)if(e&&e.push(q),W||P)if(q.modifier==="+"||q.modifier==="*"){var O=q.modifier==="*"?"?":"";D+="(?:".concat(W,"((?:").concat(q.pattern,")(?:").concat(P).concat(W,"(?:").concat(q.pattern,"))*)").concat(P,")").concat(O)}else D+="(?:".concat(W,"(").concat(q.pattern,")").concat(P,")").concat(q.modifier);else q.modifier==="+"||q.modifier==="*"?D+="((?:".concat(q.pattern,")").concat(q.modifier,")"):D+="(".concat(q.pattern,")").concat(q.modifier);else D+="(?:".concat(W).concat(P,")").concat(q.modifier)}}if(u)i||(D+="".concat(M,"?")),D+=t.endsWith?"(?=".concat(T,")"):"$";else{var B=n[n.length-1],ae=typeof B=="string"?M.indexOf(B[B.length-1])>-1:B===void 0;i||(D+="(?:".concat(M,"(?=").concat(T,"))?")),ae||(D+="(?=".concat(M,"|").concat(T,")"))}return new RegExp(D,qn(t))}function On(n,e,t){return n instanceof RegExp?ir(n,e):Array.isArray(n)?rr(n,e,t):ar(n,e,t)}/*! Universal Router | MIT License | https://www.kriasoft.com/universal-router/ */function cr(n){try{return decodeURIComponent(n)}catch{return n}}function Pn(n,e,t,s,i){var r,a,o=0;return{next:function(h){if(n===h)return{done:!0,value:!1};if(!r){var d=n,f=!d.children;if(d.match||(d.match=nr(d.path||"",Object.assign({end:f},t))),r=d.match(s),r){var C=r,v=C.path;return r.path=!f&&v.charAt(v.length-1)==="/"?v.substr(1):v,r.params=Object.assign({},i,r.params),{done:!1,value:{route:n,baseUrl:e,path:r.path,params:r.params}}}}if(r&&n.children)for(;o<n.children.length;){if(!a){var b=n.children[o];b.parent=n,a=Pn(b,e+r.path,t,s.substr(r.path.length),r.params)}var T=a.next(h);if(!T.done)return{done:!1,value:T.value};a=null,o++}return{done:!0,value:!1}}}}function lr(n,e){if(typeof n.route.action=="function")return n.route.action(n,e)}function dr(n,e){for(var t=e;t;)if(t=t.parent,t===n)return!0;return!1}var $n=function(){function n(t,s){if(!t||typeof t!="object")throw new TypeError("Invalid routes");this.options=Object.assign({decode:cr},s),this.baseUrl=this.options.baseUrl||"",this.root=Array.isArray(t)?{path:"",children:t,parent:null}:t,this.root.parent=null}var e=n.prototype;return e.resolve=function(s){var i=this,r=Object.assign({router:this},this.options.context,typeof s=="string"?{pathname:s}:s),a=Pn(this.root,this.baseUrl,this.options,r.pathname.substr(this.baseUrl.length)),o=this.options.resolveRoute||lr,u,h,d=r;function f(C,v,b){v===void 0&&(v=!u.done&&u.value.route);var T=b===null&&!u.done&&u.value.route;if(u=h||a.next(T),h=null,!C&&(u.done||!dr(v,u.value.route)))return h=u,Promise.resolve(null);if(u.done){var M=new Error("Route not found");return M.status=404,Promise.reject(M)}return d=Object.assign({},r,u.value),Promise.resolve(o(d,u.value.params)).then(function(D){return D??f(C,v,D)})}return r.next=f,Promise.resolve().then(function(){return f(!0,i.root)}).catch(function(C){if(i.options.errorHandler)return i.options.errorHandler(C,d);throw C})},n}();const Rt="/dish",ur="/dish/menu-item-id",Hn=async n=>await S.get(`${x}${ur}/${n}`).then(e=>e.data),hr=async n=>await S.get(`${x}${Rt}/${n}`).then(e=>e.data),mr=async(n,e)=>await S.post(`${x}${Rt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),pr=async(n,e)=>await S.patch(`${x}${Rt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),fr="/reviews/user",kt="/reviews",yr=async()=>await S.get(`${x}${fr}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),Bn=async n=>await S.get(`${x}${kt}/${n}`,{}).then(e=>e.data),gr=async(n,e)=>await S.post(`${x}${kt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),wr=async(n,e)=>await S.patch(`${x}${kt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),tt="/menu-items",Er="/menu-items/popular",Un=async()=>await S.get(`${x}${tt}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),vr=async()=>await S.get(`${x}${Er}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(n=>n.data),Cr=async n=>await S.post(`${x}${tt}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),Fn=async(n,e)=>await S.patch(`${x}${tt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),br=async n=>await S.delete(`${x}${tt}/${n}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),qt="/ratings",Sr="/ratings/specific-rating",tn=async n=>await S.get(`${x}${Sr}/${n}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),Tr=async n=>await S.get(`${x}${qt}/${n}`,{}).then(e=>e.data),Lr=async(n,e)=>await S.post(`${x}${qt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),Ir=async(n,e)=>await S.patch(`${x}${qt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data);var Ot=(n=>(n.DISH="dish",n.RESTAURANT="restaurant",n))(Ot||{});class ie{static init(e){return this.element&&fetch(this.htmlTemplateURL).then(t=>t.text()).then(t=>{this.element.classList.add("rating"),this.html=t,this.dishId=e,this.fetchRating()}),this.element}static async fetchRating(){this.element.innerHTML=this.html;const e=await Tr(this.dishId);if(w.state.user){const t=await N(tn,this.dishId);t.length&&(e.rating=t[0].rating)}this.rating=e.rating||-1,this.ratingCount=e.count,this.appendStars(),this.render(),w.state.user&&this.setupEventListeners()}static appendStars(){const e=this.element.querySelector(".rating__stars-wrapper"),t=this.element.querySelector(".rating__text"),s=this.element.querySelector(".rating__reviews-count");s.innerHTML=`${this.ratingCount} reviews`,w.state.user||(t.textContent="Please login to rate this dish.");for(let i=0;i<this.numOfStars;i++){const r=document.createElement("i");r.classList.add("fa-regular","fa-star","rating__star"),r.setAttribute("data-value",(i+1).toString()),e.appendChild(r)}}static render(){this.rating!==null&&(this.selectedIndex=this.rating,this.updateStars(this.rating),this.updateText(this.rating),this.updateScore(this.rating))}static setupEventListeners(){this.element.querySelectorAll(".rating__star").forEach((t,s)=>{t.addEventListener("mouseover",()=>{this.updateStars(s),this.updateText(s),this.updateScore(s)}),t.addEventListener("mouseout",()=>{this.selectedIndex===-1?(this.resetStars(),this.resetText(),this.resetScore()):(this.updateStars(this.selectedIndex),this.updateText(this.selectedIndex),this.updateScore(this.selectedIndex))}),t.addEventListener("click",()=>{this.selectedIndex=s,this.updateStars(s),this.updateText(s),this.updateScore(s),w.state.user&&this.updateRatings(s)})})}static async updateRatings(e){const t=await N(tn,this.dishId);if(t.length)try{await N(Ir,{rating:e},t[0].id),this.fetchRating(),A.show("Rating edited")}catch{A.show("Rating edit failed")}else try{await N(Lr,{rating:e,targetType:Ot.DISH},this.dishId),this.fetchRating(),A.show("Rating done successfully")}catch{A.show("Rating failed")}}static updateStars(e){this.element.querySelectorAll(".rating__star").forEach((s,i)=>{i<=e?(s.classList.remove("fa-regular"),s.classList.add("fa-solid")):(s.classList.remove("fa-solid"),s.classList.add("fa-regular"))})}static resetStars(){this.element.querySelectorAll(".rating__star").forEach(t=>{t.classList.remove("fa-solid"),t.classList.add("fa-regular")})}static updateText(e){const t=this.element.querySelector(".rating__text");t&&w.state.user&&(t.textContent=this.starMessages[e])}static resetText(){const e=this.element.querySelector(".rating__text");e&&w.state.user&&(e.textContent="What do you think about this dish?")}static updateScore(e){const t=this.element.querySelector(".rating__score");t&&(t.textContent=`${e+1}/${this.numOfStars}`)}static resetScore(){const e=this.element.querySelector(".rating__score");e&&(e.textContent=`${this.rating+1}/${this.numOfStars}`)}}y(ie,"htmlTemplateURL","/assets/templates/components/rating.html"),y(ie,"element",document.createElement("div")),y(ie,"starMessages",["Poor","Fair","Good","Very Good","Excellent"]),y(ie,"numOfStars",5),y(ie,"rating",-1),y(ie,"ratingCount",-1),y(ie,"selectedIndex",-1),y(ie,"html",""),y(ie,"dishId","");var ue=(n=>(n.IN_STOCK="In Stock",n.OUT_OF_STOCK="Out of Stock",n))(ue||{});class Be{static init(e){return this.element&&fetch(this.htmlTemplateURL).then(t=>t.text()).then(t=>{this.element.classList.add("dish-info"),this.html=t,this.render(e)}),this.element}static render(e){this.element.innerHTML=this.html,this.renderRating(e.id),this.renderDishInfoAttribute(e.attributes),this.renderDishInfoItem(e.items),this.renderAddToCartButton(e.menuItemId);const t=this.element.querySelector(".dish-info__image");t.setAttribute("src",e.imgSrc),t.setAttribute("alt",`An image of ${e.name}`);const s=this.element.querySelector(".dish-info__price-amount");s.textContent=`Rs. ${e.price}`;const i=this.element.querySelector(".dish-info__portion-amount");i.textContent=`${e.portion}`;const r=this.element.querySelector(".dish-info__name");r.textContent=e.name;const a=this.element.querySelector(".dish-info__description");a.textContent=e.description}static renderRating(e){this.element.querySelector(".dish-info__rating-wrapper").appendChild(ie.init(e))}static renderDishInfoAttribute(e){const t=this.element.querySelector(".dish-info__attributes-wrapper");e.forEach(s=>{const i=document.createElement("div");i.className="dish-info__attribute";const r=document.createElement("i");r.className="fa-solid fa-circle dish-info__attribute-icon";const a=document.createElement("p");a.className="dish-info__attribute-title",a.textContent=s,i.appendChild(r),i.appendChild(a),t.appendChild(i)})}static renderDishInfoItem(e){const t=this.element.querySelector(".dish-info__items-list-wrapper");e.forEach(s=>{const i=document.createElement("div");i.className="dish-info__item";const r=document.createElement("i");r.className="fa-solid fa-circle dish-info__item-icon";const a=document.createElement("p");a.className="dish-info__item-title",a.textContent=s,i.appendChild(r),i.appendChild(a),t.appendChild(i)})}static async renderAddToCartButton(e){const s=(await Un()).find(a=>a.id===e);let i=this.checkIfPresentInCart(s);const r=this.element.querySelector("#dish-add-to-cart-button");r.innerText="Add to Cart",s.status===ue.OUT_OF_STOCK?(r.classList.add("button--clicked"),r.innerHTML="Out of Stock",r.disabled=!0):r.disabled=!1,i&&(r.classList.add("button--clicked"),r.innerHTML='Remove from cart <i class="fas fa-shopping-cart"></i>'),r.addEventListener("click",a=>{a.stopPropagation(),i?(z.removeItem(s),this.toggleButton(r,i),i=!1):(z.addItem(s),this.toggleButton(r,i),i=!0)})}static checkIfPresentInCart(e){return w.state.cart.some(s=>s.menuItemData.id===e.id)}static toggleButton(e,t){e.classList.toggle("button--clicked"),t?e.innerHTML="Add to Cart":e.innerHTML='Remove from cart <i class="fas fa-shopping-cart"></i>'}}y(Be,"htmlTemplateURL","/assets/templates/pages/dish-detail/section/dish-info.html"),y(Be,"element",document.createElement("section")),y(Be,"html","");class nn{constructor(e,t){y(this,"url");y(this,"element");y(this,"customerReview");y(this,"customer");this.url="/assets/templates/components/customer-review.html",this.element=document.createElement("div"),this.customer=t,this.customerReview=e,this.init()}init(){this.element&&fetch(this.url).then(e=>e.text()).then(e=>{this.element.classList.add("customer-review"),this.element.innerHTML=e,this.render()})}render(){const e=this.element.querySelector(".customer-review__image");e.setAttribute("src",this.customer.imageSrc||"/assets/images/user.jpg"),e.setAttribute("alt",`Profile picture of ${this.customer.name}`);const t=this.element.querySelector(".customer-review__customer-name");t.innerHTML=this.customer.name;const s=this.element.querySelector(".customer-review__comment");s.innerHTML=this.customerReview.comment;const i=this.element.querySelector(".customer-review__posted-date");i.innerHTML=new Date(this.customerReview.updatedAt).toDateString()}}class be{static init(e,t){return this.element&&fetch(this.htmlTemplateURL).then(s=>s.text()).then(s=>{this.element.classList.add("dish-review"),this.html=s,this.dishId=t,this.dishReviews=e,this.render(),this.setEventListeners()}),this.element}static async render(){this.element.innerHTML=this.html;const e=this.element.querySelector("#add-review-toggle-button");if(e.disabled=!0,w.state.user){e.disabled=!1;const t=this.dishReviews.find(s=>s.userId==w.state.user.id);if(t){e.innerHTML="Edit Review";const s=new nn(t,w.state.user);this.element.querySelector(".dish-review__customer-reviews").appendChild(s.element)}}this.dishReviews.forEach(async t=>{var i;const s=await Ke(t.userId);if(t.userId!=((i=w.state.user)==null?void 0:i.id)){const r=new nn(t,s);this.element.querySelector(".dish-review__customer-reviews").appendChild(r.element)}})}static setEventListeners(){const e=this.element.querySelector("#add-review-toggle-button"),t=this.element.querySelector("#post-review-button"),s=this.element.querySelector(".dish-review__review-input-wrapper"),i=this.element.querySelector(".dish-review__review-inputbox"),r=this.element.querySelector(".dish-review__form"),a=this.element.querySelector(".form__error-message");r==null||r.addEventListener("submit",async o=>{if(o.preventDefault(),!r.checkValidity()){r.reportValidity();return}const u=this.dishReviews.find(h=>h.userId==w.state.user.id);if(u&&w.state.user){const h=V.render(20);try{t.appendChild(h),t.disabled=!0,await N(wr,{comment:i.value},u.id),location.reload(),A.show("Successfully edited review")}catch(d){S.isAxiosError(d)?(a.innerHTML=d.message,A.show("Review Edit Failed")):(a.innerHTML="An unexpected error occurred",A.show("An unexpected error occurred"))}finally{t.removeChild(h),t.disabled=!1}}else try{await N(gr,{comment:i.value,targetType:Ot.DISH},this.dishId),location.reload(),A.show("Successfully created review"),i.value=""}catch{A.show("Failed to create review")}}),e&&i&&s&&t&&e.addEventListener("click",()=>{if(i.classList.toggle("visible"),t.classList.toggle("visible"),e.innerHTML==="Add Review"){e.innerHTML="Cancel";return}e.innerHTML==="Edit Review"?e.innerHTML="Cancel":e.innerHTML="Edit Review"})}}y(be,"htmlTemplateURL","/assets/templates/pages/dish-detail/section/dish-review.html"),y(be,"element",document.createElement("section")),y(be,"html",""),y(be,"dishId",""),y(be,"dishReviews",[]);class jn{static async init(e){return this.element.setAttribute("id","dish-detail-page"),this.element.innerHTML="",this.fetchData(e),this.element}static async fetchData(e){try{const t=await Hn(e),s=await Bn(t.id);this.render(t,s)}catch{history.pushState(null,"","/"),Z("/"),A.show("No Dish Detail Found")}}static render(e,t){this.element.appendChild(Be.init(e)),this.element.appendChild(be.init(t,e.id))}}y(jn,"element",document.createElement("div"));class yt{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("about"),this.element.setAttribute("id","about"),this.element.innerHTML=e}),this.element}}y(yt,"htmlTemplateurl","/assets/templates/pages/landing-page/section/about.html"),y(yt,"element",document.createElement("section"));class gt{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("download-app"),this.element.innerHTML=e}),this.element}}y(gt,"htmlTemplateurl","/assets/templates/pages/landing-page/section/download-app.html"),y(gt,"element",document.createElement("section"));class wt{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("feedback"),this.element.innerHTML=e}),this.element}}y(wt,"htmlTemplateurl","/assets/templates/pages/landing-page/section/feedback.html"),y(wt,"element",document.createElement("section"));class Et{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("hero"),this.element.innerHTML=e,this.setEventListeners()}),this.element}static setEventListeners(){this.element.querySelector("#hero-order-button").addEventListener("click",()=>{history.pushState(null,"","/menu"),Z("/menu")})}}y(Et,"htmlTemplateurl","/assets/templates/pages/landing-page/section/hero.html"),y(Et,"element",document.createElement("section"));class zn{constructor(e,t){y(this,"menuItemData");y(this,"type");y(this,"isAddedToCart");y(this,"button");y(this,"className");y(this,"element");this.type=t,this.menuItemData=e,this.className="menu-item-card",this.isAddedToCart=this.checkIfPresentInCart(),this.button=document.createElement("button"),this.element=document.createElement("div"),this.init()}init(){if(this.menuItemData.isPopular){const e=this.createIsPopularRibbon();this.element.appendChild(e)}this.createItemCard()}createItemCard(){this.element.classList.add(this.className),this.type&&this.element.classList.add(`${this.className}--large`),this.element.setAttribute("id",this.menuItemData.id);const e=document.createElement("img");e.src=this.menuItemData.imageSrc,e.alt=`An image of ${this.menuItemData.name}`;const t=document.createElement("div");t.classList.add("info-wrapper");const s=document.createElement("h3");s.innerText=this.menuItemData.name;const i=document.createElement("div");i.classList.add("portion"),i.innerText=this.menuItemData.portion;const r=document.createElement("div");r.classList.add("price"),r.innerText=`Rs. ${this.menuItemData.price}`,this.button.classList.add("button"),this.button.name="addtocartbutton",this.button.innerText="Add to Cart",this.menuItemData.status===ue.OUT_OF_STOCK?(this.button.classList.add("button--clicked"),this.button.innerHTML="Out of Stock",this.button.disabled=!0):this.button.disabled=!1,this.isAddedToCart&&(this.button.classList.add("button--clicked"),this.button.innerHTML='Remove from cart <i class="fas fa-shopping-cart"></i>'),this.button.addEventListener("click",a=>{a.stopPropagation(),this.isAddedToCart?(z.removeItem(this.menuItemData),this.toggleButton(),this.isAddedToCart=!1):(z.addItem(this.menuItemData),this.toggleButton(),this.isAddedToCart=!0)}),this.element.appendChild(e),t.appendChild(s),t.appendChild(i),t.appendChild(r),this.element.appendChild(t),this.element.appendChild(this.button),this.element.addEventListener("click",()=>{history.pushState(null,"",`/dish-detail/${this.menuItemData.id}`),Z(`/dish-detail/${this.menuItemData.id}`),window.scrollTo(0,0)})}createIsPopularRibbon(){const e=document.createElement("div");e.classList.add("ribbon","ribbon-top-left");const t=document.createElement("span");return t.innerText="popular",e.appendChild(t),e}checkIfPresentInCart(){return w.state.cart.some(t=>t.menuItemData.id===this.menuItemData.id)}toggleButton(){this.button.classList.toggle("button--clicked"),this.isAddedToCart?this.button.innerHTML="Add to Cart":this.button.innerHTML='Remove from cart <i class="fas fa-shopping-cart"></i>'}}class vt{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("menu"),this.element.innerHTML=e;const t=V.render(50);this.element.appendChild(t),this.fetchMenus(t)}),this.element}static async fetchMenus(e){try{const t=await vr();this.renderMenu(t)}catch(t){this.element.innerHTML=`<h3>${t}</h3>`}finally{e.remove()}}static renderMenu(e){const t=this.element.querySelector("#menu-list");t.innerHTML="",e.forEach(s=>{const i=new zn(s,"large");t.appendChild(i.element)})}}y(vt,"htmlTemplateurl","/assets/templates/pages/landing-page/section/menu.html"),y(vt,"element",document.createElement("section"));class Vn{static async init(){return this.element.setAttribute("id","landing-page"),this.element.appendChild(Et.init()),this.element.appendChild(vt.init()),this.element.appendChild(yt.init()),this.element.appendChild(wt.init()),this.element.appendChild(gt.init()),this.element}}y(Vn,"element",document.createElement("div"));const Ar="/menus/all",Pt="/menus",Ct=async()=>await S.get(`${x}${Ar}`).then(n=>n.data),_r=async(n,e)=>await S.post(`${x}${Pt}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{restaurantId:e}}).then(t=>t.data),xr=async(n,e)=>await S.patch(`${x}${Pt}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{menuId:e}}).then(t=>t.data),Nr=async n=>await S.delete(`${x}${Pt}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{menuId:n}}).then(e=>e.data);class Mr{constructor(e){y(this,"element");y(this,"restaurantMenuData");this.element=document.createElement("div"),this.restaurantMenuData=e}init(){return this.element.classList.add("menu-list-wrapper"),this.render(),this.element}render(){this.restaurantMenuData.forEach(e=>{const t=new zn(e,"large");this.element.appendChild(t.element)})}}class Dr{constructor(e){y(this,"element");y(this,"restaurantMenuName");this.element=document.createElement("div"),this.restaurantMenuName=e}init(){this.element.classList.add("title-wrapper");const e=document.createElement("h1");e.className="title-wrapper__heading",e.textContent=this.restaurantMenuName,this.element.appendChild(e);const t=document.createElement("span");return t.className="title-wrapper__heading-span",t.textContent="menu",this.element.appendChild(t),this.element}}class Rr{constructor(){y(this,"element");this.element=document.createElement("section")}init(e){return this.element.classList.add("restaurant"),e.menuItems.length?(this.element.appendChild(new Dr(e.name).init()),this.element.appendChild(new Mr(e.menuItems).init())):this.element=document.createElement("div"),this.element}}class bt{static init(){this.element.setAttribute("class","menu-page"),this.element.innerHTML="";const e=V.render(50);return this.element.appendChild(e),this.fetchMenus(e),this.element}static async fetchMenus(e){try{this.menus=await Ct(),this.renderRestaurantsMenu()}catch(t){this.element.innerHTML=`<h3>${t}</h3>`}finally{e.remove()}}static async renderRestaurantsMenu(){this.menus.forEach(e=>{this.element.appendChild(new Rr().init(e))})}}y(bt,"element",document.createElement("div")),y(bt,"menus",[]);class qe{static init(){return this.element.setAttribute("class","content"),this.element}static render(e){this.element.innerHTML="",this.element.appendChild(e)}}y(qe,"element",document.createElement("div"));class he{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("error-page"),this.html=e,this.render()}),this.element}static render(){this.element.innerHTML=this.html;const e=this.element.querySelector(".error-page__image");e.setAttribute("src","/assets/images/error-image.png"),e.setAttribute("alt","An image of 404 not found error")}}y(he,"htmlTemplateurl","/assets/templates/pages/error-page/error-page.html"),y(he,"element",document.createElement("section")),y(he,"html","");class kr{constructor(e){y(this,"htmlTemplateUrl");y(this,"element");y(this,"cartItemData");this.htmlTemplateUrl="/assets/templates/components/cart-item-checkout.html",this.element=document.createElement("div"),this.cartItemData=e,this.init()}init(){return this.element&&fetch(this.htmlTemplateUrl).then(e=>e.text()).then(e=>{this.element.classList.add("cart-item","cart-item--small"),this.element.innerHTML=e,this.render()}),this.element}render(){const e=this.element.querySelector(".cart-item__image");e.src=this.cartItemData.menuItemData.imageSrc,e.alt=`An image of ${this.cartItemData.menuItemData.name}`;const t=this.element.querySelector("#cart-item-title");t.innerHTML=this.cartItemData.menuItemData.name;const s=this.element.querySelector("#cart-item-unit-price");s.innerHTML=`Rs. ${this.cartItemData.menuItemData.price}`;const i=this.element.querySelector("#cart-item-total-price");i.innerHTML=`Rs. ${this.cartItemData.menuItemData.price*this.cartItemData.quantity}`;const r=this.element.querySelector(".cart-item__item-count");r.innerText=`x${this.cartItemData.quantity}`}}const nt="/orders",qr="/orders/restaurant",Or=async n=>await S.get(`${x}${nt}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{userID:n}}).then(e=>e.data),Pr=async n=>await S.get(`${x}${qr}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`},params:{userID:n}}).then(e=>e.data),$r=async n=>await S.post(`${x}${nt}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data),Hr=async(n,e)=>await S.patch(`${x}${nt}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data),Br=async n=>await S.delete(`${x}${nt}/${n}`,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(e=>e.data);class re{static init(){return this.element.classList.add("cart"),this.loadHtmlTemplate().then(e=>{this.html=e,this.element.innerHTML="",this.render(),this.renderAccordion(),this.renderCartItems(),this.renderOrderBilling(),this.setEventListeners()}),this.element}static async loadHtmlTemplate(){try{return await(await fetch(this.htmlTemplateUrl)).text()}catch(e){return console.error("Failed to load HTML template",e),"<h3>Failed to load the cart template.</h3>"}}static render(){this.element.innerHTML=this.html;const e=this.element.querySelector("#order-phone");an(e,{initialCountry:"np",onlyCountries:["np"],utilsScript:"'node_modules/intl-tel-input/build/js/utils.js'"});const t=new Date().toISOString().split("T")[0],s=this.element.querySelector("#order-date");s.setAttribute("min",t),s.value=t;const i=new Date;i.setMinutes(i.getMinutes()+30);const r=String(i.getHours()).padStart(2,"0"),a=String(i.getMinutes()).padStart(2,"0"),o=`${r}:${a}`,u="09:00",h="21:00",d=this.element.querySelector("#order-time");d.setAttribute("min",u),d.setAttribute("max",h),d.setAttribute("value",o),this.subTotalAmount=w.state.cart.reduce((f,C)=>f+C.menuItemData.price*C.quantity,0),this.totalAmount=this.subTotalAmount+this.deliveryAmount-this.discountAmount}static renderAccordion(){this.element.querySelectorAll(".checkout__accordion-header").forEach((t,s)=>{const r=t.parentElement.querySelector(".checkout__accordion-content");s===0&&(r.classList.add("open"),t.classList.add("active")),t.addEventListener("click",()=>{t.classList.toggle("active"),r.classList.toggle("open")})})}static renderCartItems(){const e=this.element.querySelector(".checkout__cart-container");e.innerHTML="",w.state.cart.forEach(t=>{const s=new kr(t);e.append(s.element)})}static renderOrderBilling(){const e=this.element.querySelector(".order-billing__sub-total-amount");e.innerText=`Rs. ${this.subTotalAmount}`;const t=this.element.querySelector(".order-billing__delivery-amount");t.innerText=`Rs. ${this.deliveryAmount}`;const s=this.element.querySelector(".order-billing__total-amount");s.innerText=`Rs. ${this.subTotalAmount+this.deliveryAmount}`}static setEventListeners(){const e=this.element.querySelector("#edit-cart-button"),t=this.element.querySelector("#track-order-button");t.style.display="none";const s=this.element.querySelector(".checkout__success-container");s.style.display="none",e.addEventListener("click",()=>{history.pushState(null,"","/cart"),Z("/cart")});const i=this.element.querySelector("#checkout-form"),r=this.element.querySelector("#confirm-order-button"),a=this.element.querySelector(".form__error-message");i.addEventListener("submit",async o=>{if(o.preventDefault(),!i.checkValidity()){i.reportValidity();return}const u=new FormData(i),h=Object.fromEntries(u.entries()),d=w.state.cart.map(v=>({menuItemId:v.menuItemData.id,quantity:v.quantity,unitPrice:v.menuItemData.price,notes:""})),f={customerPhone:h.customer_phone,deliveryAddress:h.delivery_address,customerName:h.customer_name,notes:h.notes,orderDate:h.order_date,orderTime:h.order_time,paymentMethod:h.payment_method,subTotalAmount:this.subTotalAmount,totalAmount:this.totalAmount,deliveryAmount:this.deliveryAmount,discountAmount:this.discountAmount,orderItems:d},C=V.render(20);try{r.appendChild(C),r.disabled=!0,await N($r,f),await N(Dn);const v=this.element.querySelector("#track-order-button");v.style.display="flex";const b=this.element.querySelector("#confirm-order-button");b.style.display="none";const T=this.element.querySelector("#edit-cart-button");T.style.display="none";const M=this.element.querySelector(".checkout__accordion");M.style.display="none";const D=this.element.querySelector(".checkout__success-container");D.style.display="flex",window.scrollTo(0,0);const H=this.element.querySelector("#order-summary-name");H.innerHTML=`${f.customerName||""}`;const k=this.element.querySelector("#order-summary-phone");k.innerHTML=`${f.customerPhone||""}`;const q=this.element.querySelector("#order-summary-date");q.innerHTML=`${f.orderDate||""}`;const W=this.element.querySelector("#order-summary-time");W.innerHTML=`${f.orderTime||""}`;const P=this.element.querySelector("#order-summary-address");P.innerHTML=`${f.deliveryAddress||""}`;const O=this.element.querySelector("#order-summary-payment-method");O.innerHTML=`${f.paymentMethod||""}`;const B=this.element.querySelector("#order-summary-note");B.innerHTML=`${f.notes||""}`,a.innerHTML="",v.addEventListener("click",()=>{w.updateState("cart",[]),history.pushState(null,"","/dashboard"),Z("/dashboard")})}catch(v){S.isAxiosError(v)?(a.innerHTML=v.message,A.show("Checkout Failed")):(a.innerHTML="An unexpected error occurred",A.show("An unexpected error occurred"))}finally{r.removeChild(C),r.disabled=!1}})}}y(re,"htmlTemplateUrl","/assets/templates/pages/checkout-page/checkout-page.html"),y(re,"element",document.createElement("section")),y(re,"deliveryAmount",100),y(re,"discountAmount",0),y(re,"subTotalAmount",0),y(re,"totalAmount",0),y(re,"spinner",V.render(50)),y(re,"html",""),y(re,"cartItemArray",[]);class Ee{constructor(e,t){y(this,"element");y(this,"content");y(this,"heading");this.element=document.createElement("div"),this.content=e,this.heading=t,this.init()}init(){return this.element.classList.add("accordion-item"),this.element.appendChild(this.heading.element),this.element.appendChild(this.content.element),this.renderAccordion(),this.setEventListeners(),this.element}renderAccordion(){const e=this.element.querySelector(".accordion-header"),s=e.parentElement.querySelector(".accordion-content");e.addEventListener("click",()=>{e.classList.toggle("active"),s.classList.toggle("open")})}setEventListeners(){this.heading.eventListeners(this.heading.element,this.heading.params),this.content.eventListeners(this.content.element)}}const de=class de{static init(e){return this.adminAccessToken=e,this.element&&fetch(this.htmlTemplateurl).then(t=>t.text()).then(t=>{this.element.classList.add("dashboard"),this.html=t,this.fetchAllUsers()}),this.element}static async fetchAllUsers(){this.element.innerHTML=this.html;const e=await Wi(this.adminAccessToken);this.render(e)}static createAccordionHeader(e){const t=document.createElement("div");t.className="accordion-header";const s=document.createElement("div");s.className="accordion-title-wrapper";const i=document.createElement("i");i.className="fa-solid fa-circle-check accordion-header-icon",s.appendChild(i);const r=document.createElement("p");r.className="accordion-title",r.innerText=e,s.appendChild(r);const a=document.createElement("i");a.className="fa-solid fa-trash accordion-header-danger-action-icon",a.id="delete-user",t.appendChild(a);const o=document.createElement("i");o.className="fa-solid fa-angle-down accordion-header-trailing-icon";const u=document.createElement("div");return u.classList.add("accordion-header-icon-wrapper"),u.appendChild(a),u.appendChild(o),t.appendChild(s),t.appendChild(u),t}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/user-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent();t.querySelector("#user-profile-image").setAttribute("src",e.profileImgSrc||"");const i=t.querySelector("#user-fullname");i.innerHTML=`${e.fullName||""}`;const r=t.querySelector("#user-email");r.innerHTML=`${e.email||""}`;const a=t.querySelector("#user-phone-number");return a.innerHTML=`${e.phoneNumber||""}`,t}static accordionHeaderEventListener(e,t){e.querySelector("#delete-user").addEventListener("click",i=>{i.stopPropagation(),de.deleteUser(t),de.fetchAllUsers()})}static async render(e){const t=this.element.querySelector("#users-container");e.length||(t.innerHTML="<h3>No Users</h3>"),e.forEach(async s=>{if(s.name==="Admin")return;const i={fullName:s.name,email:s.email,phoneNumber:s.phoneNumber,profileImgSrc:s.imageSrc||""},r=`${s.name}`,a=await this.renderAccordionContent(i),o=this.createAccordionHeader(r),u=this.accordionHeaderEventListener,h={element:o,eventListeners:u,params:s.id},d={element:a,eventListeners:()=>null},f=new Ee(d,h);t.appendChild(f.element)})}static async deleteUser(e){try{await Yi(e,this.adminAccessToken),A.show("User deleted successfully"),this.fetchAllUsers()}catch(t){S.isAxiosError(t)?A.show(t.message):A.show("An unexpected error occurred")}}};y(de,"element",document.createElement("div")),y(de,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/user.html"),y(de,"html",""),y(de,"adminAccessToken","");let St=de;class fe{static init(e,t,s){return this.element&&fetch(this.htmlTemplateURL).then(i=>i.text()).then(async i=>{this.element.classList.add("modal-form"),this.element.innerHTML=i,this.innerElements(),this.type=e,t&&(this.prefillForm(t),this.dishId=t.id),s&&(this.menuItemId=s),this.setupEventListeners(),this.render()}),this.element}static render(){this.type==="create"?(this.innerElements().submitButton.innerHTML="Register",this.innerElements().menuItemHeading.innerHTML="Register Menu Item",this.innerElements().dishHeading.innerHTML="Dish Details"):(this.innerElements().submitButton.innerHTML="Edit",this.innerElements().menuItemHeading.innerHTML="Edit Menu Item",this.innerElements().dishHeading.innerHTML="Dish Details")}static innerElements(){return{menuItemHeading:this.element.querySelector("#menu-item-creation-heading"),mainform:this.element.querySelector("#main-form"),menuItemName:this.element.querySelector("#menu-item-name"),menuItemPortion:this.element.querySelector("#menu-item-portion"),menuItemPrice:this.element.querySelector("#menu-item-price"),menuItemImage:this.element.querySelector("#menu-item-image"),isPopular:this.element.querySelector("#menu-is-popular"),crossButton:this.element.querySelector("#modal-cross-button"),submitButton:this.element.querySelector("#form-submit-button"),dishHeading:this.element.querySelector("#dish-creation-heading"),dishAttributes:this.element.querySelector("#dish-attributes"),dishItems:this.element.querySelector("#dish-items"),dishDescription:this.element.querySelector("#dish-description"),errorMessage:this.element.querySelector(".form__error-message")}}static prefillForm(e){this.innerElements().menuItemName.value=e.name,this.innerElements().menuItemPortion.value=e.portion,this.innerElements().menuItemPrice.value=e.price.toString(),this.innerElements().dishDescription.value=e.description,this.innerElements().dishAttributes.value=e.attributes.toString(),this.innerElements().dishItems.value=e.items.toString()}static setupEventListeners(){this.innerElements().crossButton.addEventListener("click",()=>Q.toggle()),this.innerElements().mainform.addEventListener("submit",async e=>{if(e.preventDefault(),!this.innerElements().mainform.checkValidity()){this.innerElements().mainform.reportValidity();return}this.submitForm()})}static async submitForm(){const e=await N(Ve);await We(e.url.url,this.innerElements().menuItemImage.files[0]);const t={name:this.innerElements().menuItemName.value,portion:this.innerElements().menuItemPortion.value,price:parseInt(this.innerElements().menuItemPrice.value),imageSrc:e.url.fileName,isPopular:this.innerElements().isPopular.checked},s=this.innerElements().dishItems.value.split(",").map(a=>a.trim()),i=this.innerElements().dishAttributes.value.split(",").map(a=>a.trim()),r=V.render();try{this.innerElements().submitButton.append(r),this.innerElements().submitButton.disabled=!0;let a,o;this.type==="create"?(a=await N(Cr,t),o={name:this.innerElements().menuItemName.value,portion:this.innerElements().menuItemPortion.value,price:parseInt(this.innerElements().menuItemPrice.value),imgSrc:e.url.fileName,description:this.innerElements().dishDescription.value,attributes:i,items:s},await N(mr,o,a.created.id)):(a=await N(Fn,t,this.menuItemId),o={name:this.innerElements().menuItemName.value,portion:this.innerElements().menuItemPortion.value,price:parseInt(this.innerElements().menuItemPrice.value),imgSrc:e.url.fileName,description:this.innerElements().dishDescription.value,attributes:i,items:s},await N(pr,o,this.dishId)),Q.toggle(),A.show("Menu Item and Dish Update Successsful"),Me.init()}catch(a){S.isAxiosError(a)?(this.innerElements().errorMessage.innerHTML=a.message,A.show("Menu Item Addition Failed")):(this.innerElements().errorMessage.innerHTML="An unexpected error occurred",A.show("An unexpected error occurred"))}finally{this.innerElements().submitButton.removeChild(r),this.innerElements().submitButton.disabled=!1}}static isValidImage(e){return["image/jpeg","image/png","image/gif"].includes(e.type)}}y(fe,"htmlTemplateURL","/assets/templates/components/menu-item-form.html"),y(fe,"element",document.createElement("div")),y(fe,"type"),y(fe,"menuItemId"),y(fe,"dishId");const te=class te{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(async e=>{this.element.classList.add("dashboard"),this.html=e;const t=V.render(50);this.element.appendChild(t);const s=await this.checkIfMenuIsPresent();this.element.removeChild(t),s?this.fetchAllMenuItems():this.renderDashboard(),this.setEventListeners()}),this.element}static async checkIfMenuIsPresent(){return!!(await Ct()).find(s=>{var i;return s.restaurantId==((i=w.state.user)==null?void 0:i.restaurantId)})}static async fetchAllMenuItems(){this.element.innerHTML=this.html;const t=(await Ct()).find(s=>{var i;return s.restaurantId==((i=w.state.user)==null?void 0:i.restaurantId)});this.render(t==null?void 0:t.menuItems)}static setEventListeners(){const e=this.element.querySelector("#add-menu-item-button"),t=this.element.querySelector("#create-menu-form"),s=this.element.querySelector("#menu-title"),i=this.element.querySelector("#menu-description"),r=this.element.querySelector("#create-menu-button"),a=this.element.querySelector(".form__error-message");t==null||t.addEventListener("submit",async o=>{o.preventDefault(),t.checkValidity()||t.reportValidity();const u=V.render(20);try{r.appendChild(u),r.disabled=!0,await N(_r,{name:s.value,description:i.value}),A.show("Menu Registration Successful"),this.init()}catch(h){S.isAxiosError(h)?(a.innerHTML=h.message,A.show("Menu Registration Failed")):(a.innerHTML="An unexpected error occurred",A.show("An unexpected error occurred"))}finally{u.remove(),r.disabled=!1}}),e==null||e.addEventListener("click",()=>{Q.toggle();const o=document.querySelector(".modal");o.innerHTML="",o.appendChild(fe.init("create"))})}static renderDashboard(){this.element.innerHTML=this.html;const e=this.element.querySelector("#create-menu-container");e.style.display="flex";const t=this.element.querySelector("#add-item-container");t.style.display="none";const s=this.element.querySelector("#in-stock-menu-container");s.style.display="none";const i=this.element.querySelector("#out-of-stock-menu-container");i.style.display="none"}static createAccordionHeader(e,t){const s=document.createElement("div");s.className="accordion-header";const i=document.createElement("div");i.className="accordion-title-wrapper";const r=document.createElement("i");r.className="fa-solid fa-circle-check accordion-header-icon",i.appendChild(r);const a=document.createElement("p");a.className="accordion-title",a.innerText=t,i.appendChild(a),s.appendChild(i);const o=document.createElement("i");o.className="fa-solid fa-pen-to-square accordion-header-normal-action-icon",o.id="edit-menu-item",s.appendChild(o);const u=document.createElement("i");e==ue.IN_STOCK?u.className="fa-solid fa-toggle-on accordion-header-normal-action-icon":u.className="fa-solid fa-toggle-off accordion-header-normal-action-icon",u.id="switch-menu-item-status",s.appendChild(u);const h=document.createElement("i");h.className="fa-solid fa-trash accordion-header-danger-action-icon",h.id="delete-menu-item",s.appendChild(h);const d=document.createElement("i");d.className="fa-solid fa-angle-down accordion-header-trailing-icon";const f=document.createElement("div");return f.classList.add("accordion-header-icon-wrapper"),f.appendChild(u),f.appendChild(o),f.appendChild(h),f.appendChild(d),s.appendChild(f),s}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/menu-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent();t.querySelector("#menu-item-image").setAttribute("src",e.image||"");const i=t.querySelector("#menu-item-name");i.innerHTML=`${e.name||""}`;const r=t.querySelector("#menu-item-portion");r.innerHTML=`${e.portion||""}`;const a=t.querySelector("#menu-item-price");return a.innerHTML=`${e.price||""}`,t}static accordionHeaderEventListener(e,t){const s=e.querySelector("#delete-menu-item"),i=e.querySelector("#switch-menu-item-status"),r=e.querySelector("#edit-menu-item");s.addEventListener("click",async a=>{a.stopPropagation(),await te.deleteMenuItem(t),te.fetchAllMenuItems()}),i.addEventListener("click",async a=>{a.stopPropagation(),await te.switchMenuItemStatus(t),te.fetchAllMenuItems()}),r.addEventListener("click",async a=>{a.stopPropagation(),await te.editMenuItem(t),te.fetchAllMenuItems()})}static async render(e){const t=this.element.querySelector("#in-stock-menu"),s=this.element.querySelector("#out-of-stock-menu");t.innerHTML="",s.innerHTML="",e.length||(t.innerHTML="<h3>No active orders</h3>",s.innerHTML="<h3>No history orders</h3>");const i=this.element.querySelector("#create-menu-container");i.style.display="none",e.forEach(async r=>{const a={image:r.imageSrc,name:r.name,portion:r.portion,price:r.price.toString(),isPopular:r.isPopular?"Yes":"No"},o=r.name,u=await this.renderAccordionContent(a),h=this.createAccordionHeader(r.status,o),d=this.accordionHeaderEventListener,f={element:h,eventListeners:d,params:r.id},C={element:u,eventListeners:()=>null},v=new Ee(C,f);r.status==ue.IN_STOCK?t.appendChild(v.element):s.appendChild(v.element)})}static async editMenuItem(e){const t=await Hn(e);Q.toggle(),document.querySelector(".modal").appendChild(fe.init("edit",t,e))}static async switchMenuItemStatus(e){try{const s=(await Un()).find(i=>i.id==e);if(!s)throw new Error("Menu item not found");await N(Fn,{status:s.status==ue.IN_STOCK?ue.OUT_OF_STOCK:ue.IN_STOCK},e),A.show("Status updated successfully")}catch{A.show("An error occurred while switching the status")}}static async deleteMenuItem(e){try{await N(br,e),A.show("Menu item deleted successfully")}catch(t){S.isAxiosError(t)?A.show(t.message):A.show("An unexpected error occurred")}}};y(te,"element",document.createElement("div")),y(te,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/menu.html"),y(te,"html","");let Me=te;const Ur="/order-items",Fr=async(n,e)=>await S.patch(`${x}${Ur}/${e}`,n,{headers:{Authorization:`Bearer ${w.state.accessToken}`}}).then(t=>t.data);var Se=(n=>(n.PENDING="pending",n.COOKING="cooking",n.READY="ready",n.EN_ROUTE="en_route",n.DELIVERED="delivered",n.CANCELLED="cancelled",n))(Se||{}),U=(n=>(n.PENDING="pending",n.COOKING="cooking",n.READY="ready",n.DELIVERED="delivered",n.CANCELLED="cancelled",n))(U||{});const Te=class Te{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.html=e,this.fetchAllOrders()}),this.element}static async fetchAllOrders(){this.element.innerHTML=this.html;const e=await N(Pr);this.render(e)}static createAccordionHeader(e,t){const s=document.createElement("div");s.className="accordion-header";const i=document.createElement("div");i.className="accordion-title-wrapper";const r=document.createElement("i");r.className="fa-solid fa-circle-check accordion-header-icon",i.appendChild(r);const a=document.createElement("p");a.className="accordion-title",a.innerText=t,i.appendChild(a),s.appendChild(i);const o=document.createElement("i");o.className="fa-solid fa-angle-down accordion-header-trailing-icon";const u=document.createElement("select");u.classList.add("accordion-header-status-select"),u.id="order-status-select",[{value:U.PENDING,text:U.PENDING},{value:U.COOKING,text:U.COOKING},{value:U.READY,text:U.READY},{value:U.DELIVERED,text:U.DELIVERED},{value:U.CANCELLED,text:U.CANCELLED}].forEach(f=>{const C=document.createElement("option");C.classList.add("accordion-status-select-option"),C.value=f.value,C.textContent=f.text,u.appendChild(C)}),u.value=e,(e==U.DELIVERED||e==U.CANCELLED||e==U.READY)&&(u.disabled=!0);const d=document.createElement("div");return d.classList.add("accordion-header-icon-wrapper"),d.appendChild(u),d.appendChild(o),s.appendChild(d),s}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/order-item-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent(),s=t.querySelector("#order-summary-customer-name");s.innerHTML=`${e.customerName||""}`;const i=t.querySelector("#order-summary-name");i.innerHTML=`${e.name||""}`;const r=t.querySelector("#order-summary-date");r.innerHTML=`${e.date||""}`;const a=t.querySelector("#order-summary-time");a.innerHTML=`${e.time||""}`;const o=t.querySelector("#order-summary-quantity");o.innerHTML=`${e.quantity||""}`;const u=t.querySelector("#order-summary-price");return u.innerHTML=`${e.price||""}`,t}static accordionHeaderEventListener(e,t){const s=this.element.querySelector("#order-status-select");s.addEventListener("change",async i=>{i==null||i.stopPropagation();let r;s.value=="cooking"?r={status:U.COOKING}:s.value=="ready"?r={status:U.READY}:s.value=="cancelled"?r={status:U.CANCELLED}:s.value=="delivered"?r={status:U.DELIVERED}:r={status:U.PENDING},await N(Fr,r,t),Te.fetchAllOrders()})}static async render(e){const t=this.element.querySelector("#active-orders"),s=this.element.querySelector("#history-orders");t.innerHTML="",s.innerHTML="",e.length||(t.innerHTML="<h3>No active orders</h3>",s.innerHTML="<h3>No history orders</h3>"),e.sort((i,r)=>new Date(r.orderDate).getTime()-new Date(i.orderDate).getTime()),e.forEach(async i=>{const r=i.orderItems,a={customerName:i.customerName,name:r.menuItemData.name,quantity:r.quantity.toString(),price:(r.unitPrice*r.quantity).toString(),date:new Date(i.orderDate).toDateString(),time:i.orderTime},o=`${r.menuItemData.name} x${r.quantity}`||"Order Item Deleted",u=await this.renderAccordionContent(a),h=this.createAccordionHeader(r.status,o),d=this.accordionHeaderEventListener,f={element:h,eventListeners:d,params:r.id},C={element:u,eventListeners:()=>null},v=new Ee(C,f),b=this.element.querySelector("#active-orders"),T=this.element.querySelector("#history-orders");r.status==U.READY||r.status==U.DELIVERED||r.status==U.CANCELLED?T.appendChild(v.element):b.appendChild(v.element)})}};y(Te,"element",document.createElement("div")),y(Te,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/order.html"),y(Te,"html","");let Tt=Te;class Ue{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.html=e,this.fetchRestaurantReviews()}),this.element}static async fetchRestaurantReviews(){this.element.innerHTML=this.html;const e=await N(Qi),s=await N(Bn,e.id);this.render(s)}static createAccordionHeader(e){const t=document.createElement("div");t.className="accordion-header";const s=document.createElement("div");s.className="accordion-title-wrapper";const i=document.createElement("i");i.className="fa-solid fa-circle-check accordion-header-icon",s.appendChild(i);const r=document.createElement("p");r.className="accordion-title",r.innerText=e,s.appendChild(r);const a=document.createElement("i");a.className="fa-solid fa-angle-down accordion-header-trailing-icon";const o=document.createElement("div");return o.classList.add("accordion-header-icon-wrapper"),o.appendChild(a),t.appendChild(s),t.appendChild(o),t}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/review-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent(),s=t.querySelector("#review-customer-name");s.innerHTML=`${e.customerName||""}`;const i=t.querySelector("#review-comment");i.innerHTML=`${e.comment||""}`;const r=t.querySelector("#review-posted-date");return r.innerHTML=`${e.postedDate||""}`,t}static async render(e){const t=this.element.querySelector("#dish-review-container");t.style.display="none";const s=this.element.querySelector("#review-restaurant");e.length||(s.innerHTML="<h3>No reviews</h3>"),e.forEach(async i=>{const r=await N(Ke,i.userId),a={customerName:r.name,comment:i.comment,postedDate:new Date(i.updatedAt).toDateString()},o=`Review by ${r.name}`,u=await this.renderAccordionContent(a),d={element:this.createAccordionHeader(o),eventListeners:()=>null,params:i.id},f={element:u,eventListeners:()=>null},C=new Ee(f,d);s.appendChild(C.element)})}}y(Ue,"element",document.createElement("div")),y(Ue,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/review.html"),y(Ue,"html","");const ye=class ye{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.html=e,this.fetchAllOrders()}),this.element}static async fetchAllOrders(){this.element.innerHTML=this.html;const e=await N(Or);this.render(e)}static createAccordionHeader(e,t){const s=document.createElement("div");s.className="accordion-header";const i=document.createElement("div");i.className="accordion-title-wrapper";const r=document.createElement("i");r.className="fa-solid fa-circle-check accordion-header-icon",i.appendChild(r);const a=document.createElement("p");a.className="accordion-title",a.innerText=t,i.appendChild(a),s.appendChild(i);const o=document.createElement("i");o.className="fa-solid fa-ban accordion-header-danger-action-icon",o.id="cancel-order",s.appendChild(o);const u=document.createElement("i");u.className="fa-solid fa-trash accordion-header-danger-action-icon",u.id="delete-order";const h=document.createElement("div");h.className="accordion-header-status",h.id="order-status",h.innerHTML=e,s.appendChild(u),e==Se.CANCELLED||e==Se.DELIVERED?o.style.display="none":u.style.display="none";const d=document.createElement("i");d.className="fa-solid fa-angle-down accordion-header-trailing-icon";const f=document.createElement("div");return f.classList.add("accordion-header-icon-wrapper"),f.appendChild(h),f.appendChild(u),f.appendChild(o),f.appendChild(d),s.appendChild(f),s}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/order-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent(),s=t.querySelector("#order-summary-name");s.innerHTML=`${e.customerName||""}`;const i=t.querySelector("#order-summary-phone");i.innerHTML=`${e.customerPhone||""}`;const r=t.querySelector("#order-summary-date");r.innerHTML=`${e.orderDate||""}`;const a=t.querySelector("#order-summary-time");a.innerHTML=`${e.orderTime||""}`;const o=t.querySelector("#order-summary-address");o.innerHTML=`${e.location||""}`;const u=t.querySelector("#order-summary-payment-method");u.innerHTML=`${e.paymentMethod||""}`;const h=t.querySelector("#order-summary-note");h.innerHTML=`${e.notes||""}`;const d=t.querySelector("#order-summary-delivery-amount");d.innerHTML=`${e.deliveryAmount||""}`;const f=t.querySelector("#order-summary-sub-total-amount");f.innerHTML=`${e.subTotalAmount||""}`;const C=t.querySelector("#order-summary-total-amount");return C.innerHTML=`${e.totalAmount||""}`,t}static accordionHeaderEventListener(e,t){const s=e.querySelector("#delete-order"),i=e.querySelector("#cancel-order");s.addEventListener("click",async r=>{r.stopPropagation(),await N(Br,t),ye.fetchAllOrders()}),i.addEventListener("click",async r=>{r.stopPropagation(),await N(Hr,{status:Se.CANCELLED},t),ye.fetchAllOrders()})}static async render(e){const t=this.element.querySelector("#active-orders"),s=this.element.querySelector("#history-orders");t.innerHTML="",s.innerHTML="",e.length||(t.innerHTML="<h3>No active orders</h3>",s.innerHTML="<h3>No history orders</h3>"),e.forEach(async i=>{const r={customerName:i.customerName,customerPhone:i.customerPhone,orderDate:new Date(i.orderDate).toDateString(),orderTime:i.orderTime,description:i.notes,location:i.deliveryAddress,totalAmount:i.totalAmount.toString(),subTotalAmount:i.subTotalAmount.toString(),deliveryAmount:i.deliveryAmount.toString(),paymentMethod:i.paymentMethod,status:i.status};let a="";i.orderItems.forEach(T=>{a+=`${T.menuItemData.name} x${T.quantity} `}),a||(a="Order Items Deleted");const o=await this.renderAccordionContent(r),u=this.createAccordionHeader(i.status,a),h=this.accordionHeaderEventListener,d={element:u,eventListeners:h,params:i.id},f={element:o,eventListeners:()=>null},C=new Ee(f,d),v=this.element.querySelector("#active-orders"),b=this.element.querySelector("#history-orders");i.status==Se.CANCELLED||i.status==Se.DELIVERED?b.appendChild(C.element):v.appendChild(C.element)})}};y(ye,"element",document.createElement("div")),y(ye,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/order.html"),y(ye,"html","");let Je=ye;class Fe{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.html=e,this.fetchUserReviews()}),this.element}static async fetchUserReviews(){this.element.innerHTML=this.html;const e=await N(yr),t=e.dishReviews,s=e.restaurantReviews;this.render(t,s)}static createAccordionHeader(e){const t=document.createElement("div");t.className="accordion-header";const s=document.createElement("div");s.className="accordion-title-wrapper";const i=document.createElement("i");i.className="fa-solid fa-circle-check accordion-header-icon",s.appendChild(i);const r=document.createElement("p");r.className="accordion-title",r.innerText=e,s.appendChild(r);const a=document.createElement("i");a.className="fa-solid fa-angle-down accordion-header-trailing-icon";const o=document.createElement("div");return o.classList.add("accordion-header-icon-wrapper"),o.appendChild(a),t.appendChild(s),t.appendChild(o),t}static async initialiseAccordionContent(){const e=document.createElement("div");return e.className="accordion-content",await fetch("/assets/templates/components/review-accordion-content.html").then(s=>s.text()).then(s=>{e.innerHTML=s}),e}static async renderAccordionContent(e){const t=await this.initialiseAccordionContent(),s=t.querySelector("#review-customer-name");s.innerHTML=`${e.customerName||""}`;const i=t.querySelector("#review-comment");i.innerHTML=`${e.comment||""}`;const r=t.querySelector("#review-posted-date");return r.innerHTML=`${e.postedDate||""}`,t}static async render(e,t){const s=this.element.querySelector("#review-dish"),i=this.element.querySelector("#review-restaurant");e.length||(s.innerHTML="<h3>No reviews</h3>"),t.length||(i.innerHTML="<h3>No reviews</h3>"),e.forEach(async r=>{const o={customerName:(await N(Ke,r.userId)).name,comment:r.comment,postedDate:new Date(r.updatedAt).toDateString()},h=`Review by you for ${(await hr(r.targetId)).name}`,d=await this.renderAccordionContent(o),C={element:this.createAccordionHeader(h),eventListeners:()=>null,params:r.id},v={element:d,eventListeners:()=>null},b=new Ee(v,C);s.appendChild(b.element)}),t.forEach(async r=>{const o={customerName:(await N(Ke,r.userId)).name,comment:r.comment,postedDate:new Date(r.updatedAt).toDateString()},h=`Review by you for ${(await kn(r.targetId)).name}`,d=await this.renderAccordionContent(o),C={element:this.createAccordionHeader(h),eventListeners:()=>null,params:r.id},v={element:d,eventListeners:()=>null},b=new Ee(v,C);i.appendChild(b.element)})}}y(Fe,"element",document.createElement("div")),y(Fe,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/section/review.html"),y(Fe,"html","");var Pe;let jr=(Pe=class{static init(){return this.element&&fetch(this.htmlTemplateUrl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.element.innerHTML=e,this.render(),this.setEventListeners()}),this.element}static get innerElements(){return{userEditDetailsForm:this.element.querySelector("#user-edit-details"),restaurantEditDetailsForm:this.element.querySelector("#restaurant-edit-details"),userFullName:this.element.querySelector("#user-fullname"),userPassword:this.element.querySelector("#user-password"),userConfirmPassword:this.element.querySelector("#user-confirm-password"),deleteProfileButton:this.element.querySelector("#delete-profile-button"),errorMessage:this.element.querySelector("#customer-edit-error"),editProfileButton:this.element.querySelector("#edit-profile-button"),profileImage:this.element.querySelector("#user-profile-image")}}static render(){this.innerElements.restaurantEditDetailsForm.style.display="none"}static setEventListeners(){this.innerElements.userEditDetailsForm.addEventListener("submit",e=>this.handleFormSubmit(e)),this.innerElements.deleteProfileButton.addEventListener("click",e=>{e.preventDefault(),this.deleteProfile()})}static async handleFormSubmit(e){e.preventDefault();const t=new FormData(this.innerElements.userEditDetailsForm);this.validateForm(t)&&await this.submitEditForm(t)}static validateForm(e){var r,a;const t=((r=e.get("user-password"))==null?void 0:r.toString())||"",s=((a=e.get("user-confirm-password"))==null?void 0:a.toString())||"";return t!==s?(this.showErrorMessage("Passwords do not match"),!1):/^(?=.*[A-Z])(?=.*[!@#$%^&*])[A-Za-z\d!@#$%^&*]{4,}$/.test(t)?(this.clearErrorMessage(),!0):(this.showErrorMessage("Password must be at least 4 characters long and contain at least one uppercase letter and one special character"),!1)}static showErrorMessage(e){this.innerElements.errorMessage.textContent!==e&&(this.innerElements.errorMessage.textContent=e)}static clearErrorMessage(){this.innerElements.errorMessage.textContent&&(this.innerElements.errorMessage.textContent="")}static async submitEditForm(e){const t=V.render(20),s=await N(Ve);await N(We,s.url.url,this.innerElements.profileImage.files[0]);try{this.innerElements.editProfileButton.appendChild(t),this.innerElements.editProfileButton.disabled=!0;const i={name:e.get("user-fullname"),password:e.get("user-password"),imageSrc:s.url.fileName};await N(Gi,i)&&(history.pushState(null,"","/"),Z("/"),w.resetState(),A.show("Profile updated successfully"),A.show("Logged out"))}catch(i){S.isAxiosError(i)?(this.showErrorMessage(i.message),A.show("User Edit Failed")):(this.showErrorMessage("An error occurred while deleting the profile"),A.show("An unexpected error occurred"))}finally{this.innerElements.editProfileButton.removeChild(t),this.innerElements.editProfileButton.disabled=!1}}static async deleteProfile(){const e=V.render(20);try{this.innerElements.deleteProfileButton.appendChild(e),this.innerElements.deleteProfileButton.disabled=!0,await N(Ji),history.pushState(null,"","/"),Z("/"),w.resetState(),A.show("Profile deleted successfully"),A.show("Logged out")}catch(t){S.isAxiosError(t)?(this.showErrorMessage(t.message),A.show("User Deletion Failed")):(this.showErrorMessage("An error occurred while deleting the profile"),A.show("An unexpected error occurred"))}finally{this.innerElements.deleteProfileButton.removeChild(e),this.innerElements.deleteProfileButton.disabled=!1}}},y(Pe,"element",document.createElement("div")),y(Pe,"htmlTemplateUrl","/assets/templates/pages/customer-dashboard/section/edit-detail.html"),Pe);class Lt{static init(){return this.element&&fetch(this.htmlTemplateUrl).then(e=>e.text()).then(e=>{this.element.classList.add("dashboard"),this.element.innerHTML=e,this.render(),this.setEventListeners()}),this.element}static get innerElements(){return{userEditDetailsForm:this.element.querySelector("#user-edit-details"),restaurantEditDetailsForm:this.element.querySelector("#restaurant-edit-details"),restaurantName:this.element.querySelector("#restaurant-name"),restaurantDescription:this.element.querySelector("#restaurant-description"),deleteProfileButton:this.element.querySelector("#delete-profile-button"),errorMessage:this.element.querySelector("menu-edit-error"),editMenuButton:this.element.querySelector("#edit-menu-button")}}static render(){this.innerElements.userEditDetailsForm.style.display="none"}static setEventListeners(){this.innerElements.restaurantEditDetailsForm.addEventListener("submit",e=>this.handleFormSubmit(e)),this.innerElements.deleteProfileButton.addEventListener("click",e=>{e.preventDefault(),this.deleteProfile()})}static async handleFormSubmit(e){if(e.preventDefault(),!this.innerElements.restaurantEditDetailsForm.checkValidity()){this.innerElements.restaurantEditDetailsForm.reportValidity();return}const t=new FormData(this.innerElements.restaurantEditDetailsForm);await this.submitEditForm(t)}static showErrorMessage(e){this.innerElements.errorMessage.textContent!==e&&(this.innerElements.errorMessage.textContent=e)}static clearErrorMessage(){this.innerElements.errorMessage.textContent&&(this.innerElements.errorMessage.textContent="")}static async submitEditForm(e){const t=V.render(20);try{this.innerElements.editMenuButton.appendChild(t),this.innerElements.editMenuButton.disabled=!0;const s={name:e.get("menu-title"),description:e.get("menu-description")};await N(xr,s)&&(history.pushState(null,"","/"),Z("/"),A.show("Menu updated successfully"))}catch(s){S.isAxiosError(s)?(this.showErrorMessage(s.message),A.show("Restaurant Registration Failed")):(A.show("An error occurred while submitting the form"),this.showErrorMessage("An error occurred while submitting the form."))}finally{this.innerElements.editMenuButton.removeChild(t),this.innerElements.editMenuButton.disabled=!1}}static async deleteProfile(){const e=V.render(20);try{this.innerElements.deleteProfileButton.appendChild(e),this.innerElements.deleteProfileButton.disabled=!0,await N(Nr),history.pushState(null,"","/"),Z("/"),A.show("Menu deleted successfully")}catch(t){S.isAxiosError(t)?(this.showErrorMessage(t.message),A.show("Restaurant Registration Failed")):(this.showErrorMessage("An error occurred while deleting the menu."),A.show("An unexpected error occurred"))}finally{this.innerElements.deleteProfileButton.removeChild(e),this.innerElements.deleteProfileButton.disabled=!1}}}y(Lt,"element",document.createElement("div")),y(Lt,"htmlTemplateUrl","/assets/templates/pages/customer-dashboard/section/edit-detail.html");class Le{static init(e,t){return t&&(this.adminAccessToken=t),this.element&&fetch(this.htmlTemplateurl).then(s=>s.text()).then(async s=>{this.element.classList.add("dashboard-page"),this.element.innerHTML=s,await this.renderSidebar(e),this.setEventListeners(e)}),this.element}static innerElements(){return{admin:{userMenuOption:this.element.querySelector("#users-option"),ordersMenuOption:this.element.querySelector("#orders-option"),reviewsMenuOption:this.element.querySelector("#reviews-option"),menuOption:this.element.querySelector("#menu-option"),restaurantMenuOption:this.element.querySelector("#restaurants-option")},restaurant:{ordersMenuOption:this.element.querySelector("#orders-option"),reviewsMenuOption:this.element.querySelector("#reviews-option"),menuOption:this.element.querySelector("#menu-option"),editDetailsOption:this.element.querySelector("#edit-details-option")},customer:{ordersMenuOption:this.element.querySelector("#orders-option"),reviewsMenuOption:this.element.querySelector("#reviews-option"),editDetailsOption:this.element.querySelector("#edit-details-option")}}}static setActiveMenuOption(e,t){Object.values(e).forEach(s=>{s===t?s.classList.add("aside__menu-option--active"):s.classList.remove("aside__menu-option--active")})}static async renderSidebar(e){e==="admin"?this.renderAdminSidebar():e==="restaurant"?await this.renderRestaurantSidebar():this.renderCustomerSidebar()}static setEventListeners(e){const t=this.innerElements();e==="admin"?(this.renderContent(St.init(this.adminAccessToken)),this.setActiveMenuOption(t.admin,t.admin.userMenuOption)):e==="restaurant"?(this.renderContent(Me.init()),this.innerElements().restaurant.editDetailsOption.addEventListener("click",()=>{this.renderContent(Lt.init()),this.setActiveMenuOption(t.restaurant,t.restaurant.editDetailsOption)}),this.innerElements().restaurant.menuOption.addEventListener("click",()=>{this.renderContent(Me.init()),this.setActiveMenuOption(t.restaurant,t.restaurant.menuOption)}),this.innerElements().restaurant.ordersMenuOption.addEventListener("click",()=>{this.renderContent(Tt.init()),this.setActiveMenuOption(t.restaurant,t.restaurant.ordersMenuOption)}),this.innerElements().restaurant.reviewsMenuOption.addEventListener("click",()=>{this.renderContent(Ue.init()),this.setActiveMenuOption(t.restaurant,t.restaurant.reviewsMenuOption)})):(this.renderContent(Je.init()),this.innerElements().customer.ordersMenuOption.addEventListener("click",()=>{this.renderContent(Je.init()),this.setActiveMenuOption(t.customer,t.customer.ordersMenuOption)}),this.innerElements().customer.reviewsMenuOption.addEventListener("click",()=>{this.renderContent(Fe.init()),this.setActiveMenuOption(t.customer,t.customer.reviewsMenuOption)}),this.innerElements().customer.editDetailsOption.addEventListener("click",()=>{this.renderContent(jr.init()),this.setActiveMenuOption(t.customer,t.customer.editDetailsOption)}))}static renderContent(e){const t=this.element.querySelector(".main-container");t.innerHTML="",t.appendChild(e)}static renderCustomerSidebar(){var o,u;this.element.querySelector(".aside__profile-image").setAttribute("src",((o=w.state.user)==null?void 0:o.imageSrc)||"/assets/images/user.jpg");const t=this.element.querySelector(".aside__profile-name");t.innerHTML=((u=w.state.user)==null?void 0:u.name)||"Customer";const s=this.element.querySelector(".aside__menu");s.innerHTML="";const i=document.createElement("div");i.classList.add("aside__menu-option","aside__menu-option--active"),i.id="orders-option",i.innerText="Orders";const r=document.createElement("div");r.classList.add("aside__menu-option"),r.id="reviews-option",r.innerText="Reviews";const a=document.createElement("div");a.classList.add("aside__menu-option"),a.id="edit-details-option",a.innerText="Edit Details",s.appendChild(i),s.appendChild(r),s.appendChild(a)}static async renderRestaurantSidebar(){var h;const e=this.element.querySelector(".aside__profile-image"),t=await N(kn,(h=w.state.user)==null?void 0:h.restaurantId);e.setAttribute("src",t.profilePic);const s=this.element.querySelector(".aside__profile-name");s.innerHTML=t.name||"Restaurant";const i=this.element.querySelector(".aside__menu");i.innerHTML="";const r=document.createElement("div");r.classList.add("aside__menu-option","aside__menu-option--active"),r.id="menu-option",r.innerText="Menu";const a=document.createElement("div");a.classList.add("aside__menu-option"),a.id="orders-option",a.innerText="Orders";const o=document.createElement("div");o.classList.add("aside__menu-option"),o.id="reviews-option",o.innerText="Reviews";const u=document.createElement("div");u.classList.add("aside__menu-option"),u.id="edit-details-option",u.innerText="Edit Details",i.appendChild(r),i.appendChild(a),i.appendChild(o),i.appendChild(u)}static renderAdminSidebar(){this.element.querySelector(".aside__profile-image").setAttribute("src","/assets/images/user.jpg");const t=this.element.querySelector(".aside__profile-name");t.innerHTML="Admin";const s=this.element.querySelector(".aside__menu");s.innerHTML="";const i=document.createElement("div");i.classList.add("aside__menu-option","aside__menu-option--active"),i.id="menu-option",i.innerText="Menu";const r=document.createElement("div");r.classList.add("aside__menu-option"),r.id="orders-option",r.innerText="Orders";const a=document.createElement("div");a.classList.add("aside__menu-option"),a.id="reviews-option",a.innerText="Reviews";const o=document.createElement("div");o.classList.add("aside__menu-option"),o.id="edit-details-option",o.innerText="Edit Details";const u=document.createElement("div");u.classList.add("aside__menu-option"),u.id="restaurants-option",u.innerText="Restaurants";const h=document.createElement("div");h.classList.add("aside__menu-option"),h.id="users-option",h.innerText="Users",s.appendChild(h)}}y(Le,"element",document.createElement("div")),y(Le,"htmlTemplateurl","/assets/templates/pages/customer-dashboard/layout.html"),y(Le,"adminAccessToken","");class It{static init(){return fetch(this.htmlTemplateURL).then(e=>e.text()).then(e=>{this.element.innerHTML=e}),this.element}}y(It,"htmlTemplateURL","/assets/templates/app-section/footer.html"),y(It,"element",document.createElement("footer"));class $t{static init(){const e=document.getElementById("app");if(e){e.innerHTML="";const t=document.createElement("div");t.setAttribute("class","background-overlay"),e.appendChild(t);const s=document.createElement("div");s.setAttribute("class","modal"),e.appendChild(s),e.appendChild(Ge.init()),e.appendChild(qe.init()),e.appendChild(It.init())}}static initAdmin(e){const t=document.getElementById("app");if(t){t.innerHTML="";const s=document.createElement("div");s.setAttribute("class","background-overlay"),t.appendChild(s),document.createElement("div").setAttribute("class","modal"),t.appendChild(e)}}}class At{static init(){return this.element&&fetch(this.htmlTemplateurl).then(e=>e.text()).then(e=>{this.element.classList.add("admin-login"),this.element.innerHTML=e,this.setEventListeners(),this.render()}),this.element}static get innerElements(){return{emailInput:this.element.querySelector("#admin-login-email"),password:this.element.querySelector("#admin-login-password"),loginButton:this.element.querySelector("#admin-login-button"),loginForm:this.element.querySelector(".admin-login__form")}}static setEventListeners(){this.innerElements.loginForm.addEventListener("submit",async e=>{var s;if(e.preventDefault(),!this.innerElements.loginForm.checkValidity()){this.innerElements.loginForm.reportValidity();return}const t=V.render(20);try{this.innerElements.loginButton.appendChild(t),this.innerElements.loginButton.disabled=!0;const i=await Hi({email:this.innerElements.emailInput.value,password:this.innerElements.password.value});if(i.user.roleId!=ke.SUPERADMIN)throw new Error("Not a super admin");this.innerElements.loginButton.disabled=!1,this.innerElements.loginButton.removeChild(t),this.renderDashboard(i.accessToken)}catch(i){S.isAxiosError(i)?A.show((s=i.response)==null?void 0:s.data.message):A.show("An unexpected error occurred"),this.innerElements.loginButton.disabled=!1,this.innerElements.loginButton.removeChild(t)}})}static render(){}static renderDashboard(e){history.replaceState(null,"","admin/dashboard"),this.element.innerHTML="",this.element.classList.remove("admin-login"),this.element.classList.add("admin-dashboard"),this.element.appendChild(Le.init("admin",e))}}y(At,"htmlTemplateurl","/assets/templates/pages/admin/admin-login.html"),y(At,"element",document.createElement("div"));const zr=[{path:"/admin",action:()=>At.init()}],Vr=[{path:"/",action:()=>Vn.init()},{path:"/cart",action:()=>z.init()},{path:"/menu",action:()=>bt.init()},{path:"/dashboard",action:()=>w.state.user?Le.init("customer"):he.init()},{path:"/restaurant/dashboard",action:()=>w.state.user&&w.state.user.roleId==ke.CUSTOMER_WITH_RESTAURANT?(w.updateState("cart",[]),Le.init("restaurant")):he.init()},{path:"/checkout",action:()=>{if(w.state.user&&w.state.cart.length)return re.init();he.init()}},{path:"/dish-detail/:id",action:n=>jn.init(n.params.id)},{path:"(.*)",action:()=>he.init()}],Wn=new $n(zr),Ht=new $n(Vr),Z=async n=>{const e=await Ht.resolve({pathname:n});e&&qe.render(e)};window.addEventListener("popstate",async()=>{const n=await Ht.resolve({pathname:window.location.pathname});n&&qe.render(n);try{const e=await Wn.resolve({pathname:window.location.pathname});if(e){$t.initAdmin(e),w.resetState();return}}catch{}});window.addEventListener("DOMContentLoaded",async()=>{const n=await Ht.resolve({pathname:window.location.pathname});n&&qe.render(n);try{const e=await Wn.resolve({pathname:window.location.pathname});if(e){$t.initAdmin(e),w.resetState();return}}catch{}});document.addEventListener("DOMContentLoaded",()=>{w.loadStateFromSessionStorage(),$t.init()});
